(()=>{var ka=Object.create;var qt=Object.defineProperty;var Ia=Object.getOwnPropertyDescriptor;var Ua=Object.getOwnPropertyNames;var Ra=Object.getPrototypeOf,Ca=Object.prototype.hasOwnProperty;var Ba=r=>qt(r,"__esModule",{value:!0});var Ie=(r,e)=>()=>(r&&(e=r(r=0)),e);var R=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),qa=(r,e)=>{for(var t in e)qt(r,t,{get:e[t],enumerable:!0})},Ma=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ua(e))!Ca.call(r,i)&&(t||i!=="default")&&qt(r,i,{get:()=>e[i],enumerable:!(n=Ia(e,i))||n.enumerable});return r},Mt=(r,e)=>Ma(Ba(qt(r!=null?ka(Ra(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var Xn=R(Dt=>{"use strict";Dt.byteLength=Fa;Dt.toByteArray=$a;Dt.fromByteArray=Ga;var Ue=[],Se=[],Da=typeof Uint8Array<"u"?Uint8Array:Array,Tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Le=0,Vn=Tr.length;Le<Vn;++Le)Ue[Le]=Tr[Le],Se[Tr.charCodeAt(Le)]=Le;var Le,Vn;Se["-".charCodeAt(0)]=62;Se["_".charCodeAt(0)]=63;function Jn(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Fa(r){var e=Jn(r),t=e[0],n=e[1];return(t+n)*3/4-n}function La(r,e,t){return(e+t)*3/4-t}function $a(r){var e,t=Jn(r),n=t[0],i=t[1],o=new Da(La(r,n,i)),f=0,c=i>0?n-4:n,d;for(d=0;d<c;d+=4)e=Se[r.charCodeAt(d)]<<18|Se[r.charCodeAt(d+1)]<<12|Se[r.charCodeAt(d+2)]<<6|Se[r.charCodeAt(d+3)],o[f++]=e>>16&255,o[f++]=e>>8&255,o[f++]=e&255;return i===2&&(e=Se[r.charCodeAt(d)]<<2|Se[r.charCodeAt(d+1)]>>4,o[f++]=e&255),i===1&&(e=Se[r.charCodeAt(d)]<<10|Se[r.charCodeAt(d+1)]<<4|Se[r.charCodeAt(d+2)]>>2,o[f++]=e>>8&255,o[f++]=e&255),o}function Ha(r){return Ue[r>>18&63]+Ue[r>>12&63]+Ue[r>>6&63]+Ue[r&63]}function Wa(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Ha(n));return i.join("")}function Ga(r){for(var e,t=r.length,n=t%3,i=[],o=16383,f=0,c=t-n;f<c;f+=o)i.push(Wa(r,f,f+o>c?c:f+o));return n===1?(e=r[t-1],i.push(Ue[e>>2]+Ue[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Ue[e>>10]+Ue[e>>4&63]+Ue[e<<2&63]+"=")),i.join("")}});var Pr=R((tc,Kn)=>{"use strict";Kn.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,t);if(f.value!==i||f.enumerable!==!0)return!1}return!0}});var lt=R((rc,Zn)=>{"use strict";var ja=Pr();Zn.exports=function(){return ja()&&!!Symbol.toStringTag}});var ei=R((nc,Qn)=>{"use strict";var Yn=typeof Symbol<"u"&&Symbol,za=Pr();Qn.exports=function(){return typeof Yn!="function"||typeof Symbol!="function"||typeof Yn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:za()}});var ri=R((ic,ti)=>{"use strict";var Va="Function.prototype.bind called on incompatible ",xr=Array.prototype.slice,Ja=Object.prototype.toString,Xa="[object Function]";ti.exports=function(e){var t=this;if(typeof t!="function"||Ja.call(t)!==Xa)throw new TypeError(Va+t);for(var n=xr.call(arguments,1),i,o=function(){if(this instanceof i){var E=t.apply(this,n.concat(xr.call(arguments)));return Object(E)===E?E:this}else return t.apply(e,n.concat(xr.call(arguments)))},f=Math.max(0,t.length-n.length),c=[],d=0;d<f;d++)c.push("$"+d);if(i=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var I=function(){};I.prototype=t.prototype,i.prototype=new I,I.prototype=null}return i}});var Ft=R((oc,ni)=>{"use strict";var Ka=ri();ni.exports=Function.prototype.bind||Ka});var oi=R((sc,ii)=>{"use strict";var Za=Ft();ii.exports=Za.call(Function.call,Object.prototype.hasOwnProperty)});var Wt=R((ac,fi)=>{"use strict";var Q,ct=SyntaxError,ui=Function,Ye=TypeError,Nr=function(r){try{return ui('"use strict"; return ('+r+").constructor;")()}catch(e){}},$e=Object.getOwnPropertyDescriptor;if($e)try{$e({},"")}catch(r){$e=null}var kr=function(){throw new Ye},Ya=$e?function(){try{return arguments.callee,kr}catch(r){try{return $e(arguments,"callee").get}catch(e){return kr}}}():kr,Ke=ei()(),Me=Object.getPrototypeOf||function(r){return r.__proto__},Ze={},Qa=typeof Uint8Array>"u"?Q:Me(Uint8Array),Qe={"%AggregateError%":typeof AggregateError>"u"?Q:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Q:ArrayBuffer,"%ArrayIteratorPrototype%":Ke?Me([][Symbol.iterator]()):Q,"%AsyncFromSyncIteratorPrototype%":Q,"%AsyncFunction%":Ze,"%AsyncGenerator%":Ze,"%AsyncGeneratorFunction%":Ze,"%AsyncIteratorPrototype%":Ze,"%Atomics%":typeof Atomics>"u"?Q:Atomics,"%BigInt%":typeof BigInt>"u"?Q:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Q:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Q:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Q:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Q:FinalizationRegistry,"%Function%":ui,"%GeneratorFunction%":Ze,"%Int8Array%":typeof Int8Array>"u"?Q:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Q:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Q:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ke?Me(Me([][Symbol.iterator]())):Q,"%JSON%":typeof JSON=="object"?JSON:Q,"%Map%":typeof Map>"u"?Q:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ke?Q:Me(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Q:Promise,"%Proxy%":typeof Proxy>"u"?Q:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Q:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Q:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ke?Q:Me(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Q:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ke?Me(""[Symbol.iterator]()):Q,"%Symbol%":Ke?Symbol:Q,"%SyntaxError%":ct,"%ThrowTypeError%":Ya,"%TypedArray%":Qa,"%TypeError%":Ye,"%Uint8Array%":typeof Uint8Array>"u"?Q:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Q:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Q:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Q:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Q:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Q:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Q:WeakSet},eu=function r(e){var t;if(e==="%AsyncFunction%")t=Nr("async function () {}");else if(e==="%GeneratorFunction%")t=Nr("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Nr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&(t=Me(i.prototype))}return Qe[e]=t,t},si={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ht=Ft(),Lt=oi(),tu=Ht.call(Function.call,Array.prototype.concat),ru=Ht.call(Function.apply,Array.prototype.splice),ai=Ht.call(Function.call,String.prototype.replace),$t=Ht.call(Function.call,String.prototype.slice),nu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,iu=/\\(\\)?/g,ou=function(e){var t=$t(e,0,1),n=$t(e,-1);if(t==="%"&&n!=="%")throw new ct("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new ct("invalid intrinsic syntax, expected opening `%`");var i=[];return ai(e,nu,function(o,f,c,d){i[i.length]=c?ai(d,iu,"$1"):f||o}),i},su=function(e,t){var n=e,i;if(Lt(si,n)&&(i=si[n],n="%"+i[0]+"%"),Lt(Qe,n)){var o=Qe[n];if(o===Ze&&(o=eu(n)),typeof o>"u"&&!t)throw new Ye("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ct("intrinsic "+e+" does not exist!")};fi.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new Ye("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ye('"allowMissing" argument must be a boolean');var n=ou(e),i=n.length>0?n[0]:"",o=su("%"+i+"%",t),f=o.name,c=o.value,d=!1,I=o.alias;I&&(i=I[0],ru(n,tu([0,1],I)));for(var E=1,k=!0;E<n.length;E+=1){var O=n[E],L=$t(O,0,1),V=$t(O,-1);if((L==='"'||L==="'"||L==="`"||V==='"'||V==="'"||V==="`")&&L!==V)throw new ct("property names with quotes must have matching quotes");if((O==="constructor"||!k)&&(d=!0),i+="."+O,f="%"+i+"%",Lt(Qe,f))c=Qe[f];else if(c!=null){if(!(O in c)){if(!t)throw new Ye("base intrinsic for "+e+" exists, but the property is not available.");return}if($e&&E+1>=n.length){var J=$e(c,O);k=!!J,k&&"get"in J&&!("originalValue"in J.get)?c=J.get:c=c[O]}else k=Lt(c,O),c=c[O];k&&!d&&(Qe[f]=c)}}return c}});var yi=R((uc,Gt)=>{"use strict";var Ir=Ft(),et=Wt(),pi=et("%Function.prototype.apply%"),hi=et("%Function.prototype.call%"),di=et("%Reflect.apply%",!0)||Ir.call(hi,pi),li=et("%Object.getOwnPropertyDescriptor%",!0),He=et("%Object.defineProperty%",!0),au=et("%Math.max%");if(He)try{He({},"a",{value:1})}catch(r){He=null}Gt.exports=function(e){var t=di(Ir,hi,arguments);if(li&&He){var n=li(t,"length");n.configurable&&He(t,"length",{value:1+au(0,e.length-(arguments.length-1))})}return t};var ci=function(){return di(Ir,pi,arguments)};He?He(Gt.exports,"apply",{value:ci}):Gt.exports.apply=ci});var jt=R((fc,wi)=>{"use strict";var gi=Wt(),mi=yi(),uu=mi(gi("String.prototype.indexOf"));wi.exports=function(e,t){var n=gi(e,!!t);return typeof n=="function"&&uu(e,".prototype.")>-1?mi(n):n}});var Ai=R((lc,_i)=>{"use strict";var fu=lt()(),lu=jt(),Ur=lu("Object.prototype.toString"),zt=function(e){return fu&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Ur(e)==="[object Arguments]"},vi=function(e){return zt(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ur(e)!=="[object Array]"&&Ur(e.callee)==="[object Function]"},cu=function(){return zt(arguments)}();zt.isLegacyArguments=vi;_i.exports=cu?zt:vi});var bi=R((cc,Si)=>{"use strict";var pu=Object.prototype.toString,hu=Function.prototype.toString,du=/^\s*(?:function)?\*/,Ei=lt()(),Rr=Object.getPrototypeOf,yu=function(){if(!Ei)return!1;try{return Function("return function*() {}")()}catch(r){}},Cr;Si.exports=function(e){if(typeof e!="function")return!1;if(du.test(hu.call(e)))return!0;if(!Ei){var t=pu.call(e);return t==="[object GeneratorFunction]"}if(!Rr)return!1;if(typeof Cr>"u"){var n=yu();Cr=n?Rr(n):!1}return Rr(e)===Cr}});var Br=R((pc,Oi)=>{var gu=Object.prototype.hasOwnProperty,mu=Object.prototype.toString;Oi.exports=function(e,t,n){if(mu.call(t)!=="[object Function]")throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var o=0;o<i;o++)t.call(n,e[o],o,e);else for(var f in e)gu.call(e,f)&&t.call(n,e[f],f,e)}});var Mr=R((hc,Ti)=>{"use strict";var qr=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],wu=typeof globalThis>"u"?global:globalThis;Ti.exports=function(){for(var e=[],t=0;t<qr.length;t++)typeof wu[qr[t]]=="function"&&(e[e.length]=qr[t]);return e}});var Dr=R((dc,Pi)=>{"use strict";var vu=Wt(),Vt=vu("%Object.getOwnPropertyDescriptor%",!0);if(Vt)try{Vt([],"length")}catch(r){Vt=null}Pi.exports=Vt});var $r=R((yc,Ui)=>{"use strict";var xi=Br(),_u=Mr(),Lr=jt(),Au=Lr("Object.prototype.toString"),Ni=lt()(),Eu=typeof globalThis>"u"?global:globalThis,ki=_u(),Su=Lr("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},bu=Lr("String.prototype.slice"),Ii={},Jt=Dr(),Fr=Object.getPrototypeOf;Ni&&Jt&&Fr&&xi(ki,function(r){var e=new Eu[r];if(Symbol.toStringTag in e){var t=Fr(e),n=Jt(t,Symbol.toStringTag);if(!n){var i=Fr(t);n=Jt(i,Symbol.toStringTag)}Ii[r]=n.get}});var Ou=function(e){var t=!1;return xi(Ii,function(n,i){if(!t)try{t=n.call(e)===i}catch(o){}}),t};Ui.exports=function(e){if(!e||typeof e!="object")return!1;if(!Ni||!(Symbol.toStringTag in e)){var t=bu(Au(e),8,-1);return Su(ki,t)>-1}return Jt?Ou(e):!1}});var Fi=R((gc,Di)=>{"use strict";var Ci=Br(),Tu=Mr(),Bi=jt(),Pu=Bi("Object.prototype.toString"),qi=lt()(),Ri=typeof globalThis>"u"?global:globalThis,xu=Tu(),Nu=Bi("String.prototype.slice"),Mi={},Hr=Dr(),Wr=Object.getPrototypeOf;qi&&Hr&&Wr&&Ci(xu,function(r){if(typeof Ri[r]=="function"){var e=new Ri[r];if(Symbol.toStringTag in e){var t=Wr(e),n=Hr(t,Symbol.toStringTag);if(!n){var i=Wr(t);n=Hr(i,Symbol.toStringTag)}Mi[r]=n.get}}});var ku=function(e){var t=!1;return Ci(Mi,function(n,i){if(!t)try{var o=n.call(e);o===i&&(t=o)}catch(f){}}),t},Iu=$r();Di.exports=function(e){return Iu(e)?!qi||!(Symbol.toStringTag in e)?Nu(Pu(e),8,-1):ku(e):!1}});var Qi=R(X=>{"use strict";var Uu=Ai(),Ru=bi(),Pe=Fi(),Li=$r();function tt(r){return r.call.bind(r)}var $i=typeof BigInt<"u",Hi=typeof Symbol<"u",be=tt(Object.prototype.toString),Cu=tt(Number.prototype.valueOf),Bu=tt(String.prototype.valueOf),qu=tt(Boolean.prototype.valueOf);$i&&(Wi=tt(BigInt.prototype.valueOf));var Wi;Hi&&(Gi=tt(Symbol.prototype.valueOf));var Gi;function ht(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch(t){return!1}}X.isArgumentsObject=Uu;X.isGeneratorFunction=Ru;X.isTypedArray=Li;function Mu(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"}X.isPromise=Mu;function Du(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):Li(r)||zi(r)}X.isArrayBufferView=Du;function Fu(r){return Pe(r)==="Uint8Array"}X.isUint8Array=Fu;function Lu(r){return Pe(r)==="Uint8ClampedArray"}X.isUint8ClampedArray=Lu;function $u(r){return Pe(r)==="Uint16Array"}X.isUint16Array=$u;function Hu(r){return Pe(r)==="Uint32Array"}X.isUint32Array=Hu;function Wu(r){return Pe(r)==="Int8Array"}X.isInt8Array=Wu;function Gu(r){return Pe(r)==="Int16Array"}X.isInt16Array=Gu;function ju(r){return Pe(r)==="Int32Array"}X.isInt32Array=ju;function zu(r){return Pe(r)==="Float32Array"}X.isFloat32Array=zu;function Vu(r){return Pe(r)==="Float64Array"}X.isFloat64Array=Vu;function Ju(r){return Pe(r)==="BigInt64Array"}X.isBigInt64Array=Ju;function Xu(r){return Pe(r)==="BigUint64Array"}X.isBigUint64Array=Xu;function Xt(r){return be(r)==="[object Map]"}Xt.working=typeof Map<"u"&&Xt(new Map);function Ku(r){return typeof Map>"u"?!1:Xt.working?Xt(r):r instanceof Map}X.isMap=Ku;function Kt(r){return be(r)==="[object Set]"}Kt.working=typeof Set<"u"&&Kt(new Set);function Zu(r){return typeof Set>"u"?!1:Kt.working?Kt(r):r instanceof Set}X.isSet=Zu;function Zt(r){return be(r)==="[object WeakMap]"}Zt.working=typeof WeakMap<"u"&&Zt(new WeakMap);function Yu(r){return typeof WeakMap>"u"?!1:Zt.working?Zt(r):r instanceof WeakMap}X.isWeakMap=Yu;function jr(r){return be(r)==="[object WeakSet]"}jr.working=typeof WeakSet<"u"&&jr(new WeakSet);function Qu(r){return jr(r)}X.isWeakSet=Qu;function Yt(r){return be(r)==="[object ArrayBuffer]"}Yt.working=typeof ArrayBuffer<"u"&&Yt(new ArrayBuffer);function ji(r){return typeof ArrayBuffer>"u"?!1:Yt.working?Yt(r):r instanceof ArrayBuffer}X.isArrayBuffer=ji;function Qt(r){return be(r)==="[object DataView]"}Qt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Qt(new DataView(new ArrayBuffer(1),0,1));function zi(r){return typeof DataView>"u"?!1:Qt.working?Qt(r):r instanceof DataView}X.isDataView=zi;var Gr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function pt(r){return be(r)==="[object SharedArrayBuffer]"}function Vi(r){return typeof Gr>"u"?!1:(typeof pt.working>"u"&&(pt.working=pt(new Gr)),pt.working?pt(r):r instanceof Gr)}X.isSharedArrayBuffer=Vi;function ef(r){return be(r)==="[object AsyncFunction]"}X.isAsyncFunction=ef;function tf(r){return be(r)==="[object Map Iterator]"}X.isMapIterator=tf;function rf(r){return be(r)==="[object Set Iterator]"}X.isSetIterator=rf;function nf(r){return be(r)==="[object Generator]"}X.isGeneratorObject=nf;function of(r){return be(r)==="[object WebAssembly.Module]"}X.isWebAssemblyCompiledModule=of;function Ji(r){return ht(r,Cu)}X.isNumberObject=Ji;function Xi(r){return ht(r,Bu)}X.isStringObject=Xi;function Ki(r){return ht(r,qu)}X.isBooleanObject=Ki;function Zi(r){return $i&&ht(r,Wi)}X.isBigIntObject=Zi;function Yi(r){return Hi&&ht(r,Gi)}X.isSymbolObject=Yi;function sf(r){return Ji(r)||Xi(r)||Ki(r)||Zi(r)||Yi(r)}X.isBoxedPrimitive=sf;function af(r){return typeof Uint8Array<"u"&&(ji(r)||Vi(r))}X.isAnyArrayBuffer=af;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(X,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})})});var to=R((wc,eo)=>{eo.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var ro=R((vc,zr)=>{typeof Object.create=="function"?zr.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:zr.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var gt=R(K=>{var no=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},uf=/%[sdj%]/g;K.format=function(r){if(!sr(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(De(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(r).replace(uf,function(c){if(c==="%%")return"%";if(t>=i)return c;switch(c){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(d){return"[Circular]"}default:return c}}),f=n[t];t<i;f=n[++t])or(f)||!rt(f)?o+=" "+f:o+=" "+De(f);return o};K.deprecate=function(r,e){if(typeof process<"u"&&process.noDeprecation===!0)return r;if(typeof process>"u")return function(){return K.deprecate(r,e).apply(this,arguments)};var t=!1;function n(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return n};var er={},io=/^$/;process.env.NODE_DEBUG&&(tr=process.env.NODE_DEBUG,tr=tr.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),io=new RegExp("^"+tr+"$","i"));var tr;K.debuglog=function(r){if(r=r.toUpperCase(),!er[r])if(io.test(r)){var e=process.pid;er[r]=function(){var t=K.format.apply(K,arguments);console.error("%s %d: %s",r,e,t)}}else er[r]=function(){};return er[r]};function De(r,e){var t={seen:[],stylize:lf};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Kr(e)?t.showHidden=e:e&&K._extend(t,e),Ge(t.showHidden)&&(t.showHidden=!1),Ge(t.depth)&&(t.depth=2),Ge(t.colors)&&(t.colors=!1),Ge(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=ff),nr(t,r,t.depth)}K.inspect=De;De.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};De.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ff(r,e){var t=De.styles[e];return t?"\x1B["+De.colors[t][0]+"m"+r+"\x1B["+De.colors[t][1]+"m":r}function lf(r,e){return r}function cf(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function nr(r,e,t){if(r.customInspect&&e&&rr(e.inspect)&&e.inspect!==K.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return sr(n)||(n=nr(r,n,t)),n}var i=pf(r,e);if(i)return i;var o=Object.keys(e),f=cf(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),yt(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Vr(e);if(o.length===0){if(rr(e)){var c=e.name?": "+e.name:"";return r.stylize("[Function"+c+"]","special")}if(dt(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(ir(e))return r.stylize(Date.prototype.toString.call(e),"date");if(yt(e))return Vr(e)}var d="",I=!1,E=["{","}"];if(oo(e)&&(I=!0,E=["[","]"]),rr(e)){var k=e.name?": "+e.name:"";d=" [Function"+k+"]"}if(dt(e)&&(d=" "+RegExp.prototype.toString.call(e)),ir(e)&&(d=" "+Date.prototype.toUTCString.call(e)),yt(e)&&(d=" "+Vr(e)),o.length===0&&(!I||e.length==0))return E[0]+d+E[1];if(t<0)return dt(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var O;return I?O=hf(r,e,t,f,o):O=o.map(function(L){return Xr(r,e,t,f,L,I)}),r.seen.pop(),df(O,d,E)}function pf(r,e){if(Ge(e))return r.stylize("undefined","undefined");if(sr(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(so(e))return r.stylize(""+e,"number");if(Kr(e))return r.stylize(""+e,"boolean");if(or(e))return r.stylize("null","null")}function Vr(r){return"["+Error.prototype.toString.call(r)+"]"}function hf(r,e,t,n,i){for(var o=[],f=0,c=e.length;f<c;++f)ao(e,String(f))?o.push(Xr(r,e,t,n,String(f),!0)):o.push("");return i.forEach(function(d){d.match(/^\d+$/)||o.push(Xr(r,e,t,n,d,!0))}),o}function Xr(r,e,t,n,i,o){var f,c,d;if(d=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},d.get?d.set?c=r.stylize("[Getter/Setter]","special"):c=r.stylize("[Getter]","special"):d.set&&(c=r.stylize("[Setter]","special")),ao(n,i)||(f="["+i+"]"),c||(r.seen.indexOf(d.value)<0?(or(t)?c=nr(r,d.value,null):c=nr(r,d.value,t-1),c.indexOf(`
`)>-1&&(o?c=c.split(`
`).map(function(I){return"  "+I}).join(`
`).substr(2):c=`
`+c.split(`
`).map(function(I){return"   "+I}).join(`
`))):c=r.stylize("[Circular]","special")),Ge(f)){if(o&&i.match(/^\d+$/))return c;f=JSON.stringify(""+i),f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=r.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=r.stylize(f,"string"))}return f+": "+c}function df(r,e,t){var n=0,i=r.reduce(function(o,f){return n++,f.indexOf(`
`)>=0&&n++,o+f.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}K.types=Qi();function oo(r){return Array.isArray(r)}K.isArray=oo;function Kr(r){return typeof r=="boolean"}K.isBoolean=Kr;function or(r){return r===null}K.isNull=or;function yf(r){return r==null}K.isNullOrUndefined=yf;function so(r){return typeof r=="number"}K.isNumber=so;function sr(r){return typeof r=="string"}K.isString=sr;function gf(r){return typeof r=="symbol"}K.isSymbol=gf;function Ge(r){return r===void 0}K.isUndefined=Ge;function dt(r){return rt(r)&&Zr(r)==="[object RegExp]"}K.isRegExp=dt;K.types.isRegExp=dt;function rt(r){return typeof r=="object"&&r!==null}K.isObject=rt;function ir(r){return rt(r)&&Zr(r)==="[object Date]"}K.isDate=ir;K.types.isDate=ir;function yt(r){return rt(r)&&(Zr(r)==="[object Error]"||r instanceof Error)}K.isError=yt;K.types.isNativeError=yt;function rr(r){return typeof r=="function"}K.isFunction=rr;function mf(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}K.isPrimitive=mf;K.isBuffer=to();function Zr(r){return Object.prototype.toString.call(r)}function Jr(r){return r<10?"0"+r.toString(10):r.toString(10)}var wf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function vf(){var r=new Date,e=[Jr(r.getHours()),Jr(r.getMinutes()),Jr(r.getSeconds())].join(":");return[r.getDate(),wf[r.getMonth()],e].join(" ")}K.log=function(){console.log("%s - %s",vf(),K.format.apply(K,arguments))};K.inherits=ro();K._extend=function(r,e){if(!e||!rt(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};function ao(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var We=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;K.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(We&&e[We]){var t=e[We];if(typeof t!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,We,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var n,i,o=new Promise(function(d,I){n=d,i=I}),f=[],c=0;c<arguments.length;c++)f.push(arguments[c]);f.push(function(d,I){d?i(d):n(I)});try{e.apply(this,f)}catch(d){i(d)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),We&&Object.defineProperty(t,We,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,no(e))};K.promisify.custom=We;function _f(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}function Af(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,f=function(){return i.apply(o,arguments)};r.apply(this,t).then(function(c){process.nextTick(f.bind(null,null,c))},function(c){process.nextTick(_f.bind(null,c,f))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,no(r)),e}K.callbackify=Af});var Ce=R(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.b64UrlDecode=ce.b64UrlEncode=ce.bufferTob64Url=ce.bufferTob64=ce.b64UrlToBuffer=ce.stringToB64Url=ce.stringToBuffer=ce.bufferToString=ce.b64UrlToString=ce.concatBuffers=void 0;var uo=Xn();function Ef(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}ce.concatBuffers=Ef;function Sf(r){let e=lo(r);if(typeof TextDecoder>"u"){let t=gt().TextDecoder;return new t("utf-8",{fatal:!0}).decode(e)}return new TextDecoder("utf-8",{fatal:!0}).decode(e)}ce.b64UrlToString=Sf;function bf(r){if(typeof TextDecoder>"u"){let e=gt().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}ce.bufferToString=bf;function fo(r){if(typeof TextEncoder>"u"){let e=gt().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}ce.stringToBuffer=fo;function Of(r){return po(fo(r))}ce.stringToB64Url=Of;function lo(r){return new Uint8Array(uo.toByteArray(yo(r)))}ce.b64UrlToBuffer=lo;function co(r){return uo.fromByteArray(new Uint8Array(r))}ce.bufferTob64=co;function po(r){return ho(co(r))}ce.bufferTob64Url=po;function ho(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}ce.b64UrlEncode=ho;function yo(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}ce.b64UrlDecode=yo});var mo=R((go,ar)=>{(function(r){"use strict";var e,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",f=o+"Number primitive has more than 15 significant digits: ",c=1e14,d=14,I=9007199254740991,E=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],k=1e7,O=1e9;function L(q){var F,ne,se,x=N.prototype={constructor:N,toString:null,valueOf:null},ee=new N(1),re=20,te=4,de=-7,ye=21,xe=-1e7,we=1e7,Ne=!1,qe=1,Oe=0,Xe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},ie="0123456789abcdefghijklmnopqrstuvwxyz",ke=!0;function N(s,a){var u,w,p,g,_,l,y,v,m=this;if(!(m instanceof N))return new N(s,a);if(a==null){if(s&&s._isBigNumber===!0){m.s=s.s,!s.c||s.e>we?m.c=m.e=null:s.e<xe?m.c=[m.e=0]:(m.e=s.e,m.c=s.c.slice());return}if((l=typeof s=="number")&&s*0==0){if(m.s=1/s<0?(s=-s,-1):1,s===~~s){for(g=0,_=s;_>=10;_/=10,g++);g>we?m.c=m.e=null:(m.e=g,m.c=[s]);return}v=String(s)}else{if(!t.test(v=String(s)))return se(m,v,l);m.s=v.charCodeAt(0)==45?(v=v.slice(1),-1):1}(g=v.indexOf("."))>-1&&(v=v.replace(".","")),(_=v.search(/e/i))>0?(g<0&&(g=_),g+=+v.slice(_+1),v=v.substring(0,_)):g<0&&(g=v.length)}else{if(G(a,2,ie.length,"Base"),a==10&&ke)return m=new N(s),ve(m,re+m.e+1,te);if(v=String(s),l=typeof s=="number"){if(s*0!=0)return se(m,v,l,a);if(m.s=1/s<0?(v=v.slice(1),-1):1,N.DEBUG&&v.replace(/^0\.0*|\./,"").length>15)throw Error(f+s)}else m.s=v.charCodeAt(0)===45?(v=v.slice(1),-1):1;for(u=ie.slice(0,a),g=_=0,y=v.length;_<y;_++)if(u.indexOf(w=v.charAt(_))<0){if(w=="."){if(_>g){g=y;continue}}else if(!p&&(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase()))){p=!0,_=-1,g=0;continue}return se(m,String(s),l,a)}l=!1,v=ne(v,a,10,m.s),(g=v.indexOf("."))>-1?v=v.replace(".",""):g=v.length}for(_=0;v.charCodeAt(_)===48;_++);for(y=v.length;v.charCodeAt(--y)===48;);if(v=v.slice(_,++y)){if(y-=_,l&&N.DEBUG&&y>15&&(s>I||s!==i(s)))throw Error(f+m.s*s);if((g=g-_-1)>we)m.c=m.e=null;else if(g<xe)m.c=[m.e=0];else{if(m.e=g,m.c=[],_=(g+1)%d,g<0&&(_+=d),_<y){for(_&&m.c.push(+v.slice(0,_)),y-=d;_<y;)m.c.push(+v.slice(_,_+=d));_=d-(v=v.slice(_)).length}else _-=y;for(;_--;v+="0");m.c.push(+v)}}else m.c=[m.e=0]}N.clone=L,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(s){var a,u;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(a="DECIMAL_PLACES")&&(u=s[a],G(u,0,O,a),re=u),s.hasOwnProperty(a="ROUNDING_MODE")&&(u=s[a],G(u,0,8,a),te=u),s.hasOwnProperty(a="EXPONENTIAL_AT")&&(u=s[a],u&&u.pop?(G(u[0],-O,0,a),G(u[1],0,O,a),de=u[0],ye=u[1]):(G(u,-O,O,a),de=-(ye=u<0?-u:u))),s.hasOwnProperty(a="RANGE"))if(u=s[a],u&&u.pop)G(u[0],-O,-1,a),G(u[1],1,O,a),xe=u[0],we=u[1];else if(G(u,-O,O,a),u)xe=-(we=u<0?-u:u);else throw Error(o+a+" cannot be zero: "+u);if(s.hasOwnProperty(a="CRYPTO"))if(u=s[a],u===!!u)if(u)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ne=u;else throw Ne=!u,Error(o+"crypto unavailable");else Ne=u;else throw Error(o+a+" not true or false: "+u);if(s.hasOwnProperty(a="MODULO_MODE")&&(u=s[a],G(u,0,9,a),qe=u),s.hasOwnProperty(a="POW_PRECISION")&&(u=s[a],G(u,0,O,a),Oe=u),s.hasOwnProperty(a="FORMAT"))if(u=s[a],typeof u=="object")Xe=u;else throw Error(o+a+" not an object: "+u);if(s.hasOwnProperty(a="ALPHABET"))if(u=s[a],typeof u=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(u))ke=u.slice(0,10)=="0123456789",ie=u;else throw Error(o+a+" invalid: "+u)}else throw Error(o+"Object expected: "+s);return{DECIMAL_PLACES:re,ROUNDING_MODE:te,EXPONENTIAL_AT:[de,ye],RANGE:[xe,we],CRYPTO:Ne,MODULO_MODE:qe,POW_PRECISION:Oe,FORMAT:Xe,ALPHABET:ie}},N.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!N.DEBUG)return!0;var a,u,w=s.c,p=s.e,g=s.s;e:if({}.toString.call(w)=="[object Array]"){if((g===1||g===-1)&&p>=-O&&p<=O&&p===i(p)){if(w[0]===0){if(p===0&&w.length===1)return!0;break e}if(a=(p+1)%d,a<1&&(a+=d),String(w[0]).length==a){for(a=0;a<w.length;a++)if(u=w[a],u<0||u>=c||u!==i(u))break e;if(u!==0)return!0}}}else if(w===null&&p===null&&(g===null||g===1||g===-1))return!0;throw Error(o+"Invalid BigNumber: "+s)},N.maximum=N.max=function(){return Bt(arguments,x.lt)},N.minimum=N.min=function(){return Bt(arguments,x.gt)},N.random=function(){var s=9007199254740992,a=Math.random()*s&2097151?function(){return i(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(u){var w,p,g,_,l,y=0,v=[],m=new N(ee);if(u==null?u=re:G(u,0,O),_=n(u/d),Ne)if(crypto.getRandomValues){for(w=crypto.getRandomValues(new Uint32Array(_*=2));y<_;)l=w[y]*131072+(w[y+1]>>>11),l>=9e15?(p=crypto.getRandomValues(new Uint32Array(2)),w[y]=p[0],w[y+1]=p[1]):(v.push(l%1e14),y+=2);y=_/2}else if(crypto.randomBytes){for(w=crypto.randomBytes(_*=7);y<_;)l=(w[y]&31)*281474976710656+w[y+1]*1099511627776+w[y+2]*4294967296+w[y+3]*16777216+(w[y+4]<<16)+(w[y+5]<<8)+w[y+6],l>=9e15?crypto.randomBytes(7).copy(w,y):(v.push(l%1e14),y+=7);y=_/7}else throw Ne=!1,Error(o+"crypto unavailable");if(!Ne)for(;y<_;)l=a(),l<9e15&&(v[y++]=l%1e14);for(_=v[--y],u%=d,_&&u&&(l=E[d-u],v[y]=i(_/l)*l);v[y]===0;v.pop(),y--);if(y<0)v=[g=0];else{for(g=-1;v[0]===0;v.splice(0,1),g-=d);for(y=1,l=v[0];l>=10;l/=10,y++);y<d&&(g-=d-y)}return m.e=g,m.c=v,m}}(),N.sum=function(){for(var s=1,a=arguments,u=new N(a[0]);s<a.length;)u=u.plus(a[s++]);return u},ne=function(){var s="0123456789";function a(u,w,p,g){for(var _,l=[0],y,v=0,m=u.length;v<m;){for(y=l.length;y--;l[y]*=w);for(l[0]+=g.indexOf(u.charAt(v++)),_=0;_<l.length;_++)l[_]>p-1&&(l[_+1]==null&&(l[_+1]=0),l[_+1]+=l[_]/p|0,l[_]%=p)}return l.reverse()}return function(u,w,p,g,_){var l,y,v,m,b,M,D,Y,h=u.indexOf("."),A=re,S=te;for(h>=0&&(m=Oe,Oe=0,u=u.replace(".",""),Y=new N(w),M=Y.pow(u.length-h),Oe=m,Y.c=a(Z(J(M.c),M.e,"0"),10,p,s),Y.e=Y.c.length),D=a(u,w,p,_?(l=ie,s):(l=s,ie)),v=m=D.length;D[--m]==0;D.pop());if(!D[0])return l.charAt(0);if(h<0?--v:(M.c=D,M.e=v,M.s=g,M=F(M,Y,A,S,p),D=M.c,b=M.r,v=M.e),y=v+A+1,h=D[y],m=p/2,b=b||y<0||D[y+1]!=null,b=S<4?(h!=null||b)&&(S==0||S==(M.s<0?3:2)):h>m||h==m&&(S==4||b||S==6&&D[y-1]&1||S==(M.s<0?8:7)),y<1||!D[0])u=b?Z(l.charAt(1),-A,l.charAt(0)):l.charAt(0);else{if(D.length=y,b)for(--p;++D[--y]>p;)D[y]=0,y||(++v,D=[1].concat(D));for(m=D.length;!D[--m];);for(h=0,u="";h<=m;u+=l.charAt(D[h++]));u=Z(u,v,l.charAt(0))}return u}}(),F=function(){function s(w,p,g){var _,l,y,v,m=0,b=w.length,M=p%k,D=p/k|0;for(w=w.slice();b--;)y=w[b]%k,v=w[b]/k|0,_=D*y+v*M,l=M*y+_%k*k+m,m=(l/g|0)+(_/k|0)+D*v,w[b]=l%g;return m&&(w=[m].concat(w)),w}function a(w,p,g,_){var l,y;if(g!=_)y=g>_?1:-1;else for(l=y=0;l<g;l++)if(w[l]!=p[l]){y=w[l]>p[l]?1:-1;break}return y}function u(w,p,g,_){for(var l=0;g--;)w[g]-=l,l=w[g]<p[g]?1:0,w[g]=l*_+w[g]-p[g];for(;!w[0]&&w.length>1;w.splice(0,1));}return function(w,p,g,_,l){var y,v,m,b,M,D,Y,h,A,S,T,U,le,H,W,B,j,$=w.s==p.s?1:-1,ue=w.c,ae=p.c;if(!ue||!ue[0]||!ae||!ae[0])return new N(!w.s||!p.s||(ue?ae&&ue[0]==ae[0]:!ae)?NaN:ue&&ue[0]==0||!ae?$*0:$/0);for(h=new N($),A=h.c=[],v=w.e-p.e,$=g+v+1,l||(l=c,v=V(w.e/d)-V(p.e/d),$=$/d|0),m=0;ae[m]==(ue[m]||0);m++);if(ae[m]>(ue[m]||0)&&v--,$<0)A.push(1),b=!0;else{for(H=ue.length,B=ae.length,m=0,$+=2,M=i(l/(ae[0]+1)),M>1&&(ae=s(ae,M,l),ue=s(ue,M,l),B=ae.length,H=ue.length),le=B,S=ue.slice(0,B),T=S.length;T<B;S[T++]=0);j=ae.slice(),j=[0].concat(j),W=ae[0],ae[1]>=l/2&&W++;do{if(M=0,y=a(ae,S,B,T),y<0){if(U=S[0],B!=T&&(U=U*l+(S[1]||0)),M=i(U/W),M>1)for(M>=l&&(M=l-1),D=s(ae,M,l),Y=D.length,T=S.length;a(D,S,Y,T)==1;)M--,u(D,B<Y?j:ae,Y,l),Y=D.length,y=1;else M==0&&(y=M=1),D=ae.slice(),Y=D.length;if(Y<T&&(D=[0].concat(D)),u(S,D,T,l),T=S.length,y==-1)for(;a(ae,S,B,T)<1;)M++,u(S,B<T?j:ae,T,l),T=S.length}else y===0&&(M++,S=[0]);A[m++]=M,S[0]?S[T++]=ue[le]||0:(S=[ue[le]],T=1)}while((le++<H||S[0]!=null)&&$--);b=S[0]!=null,A[0]||A.splice(0,1)}if(l==c){for(m=1,$=A[0];$>=10;$/=10,m++);ve(h,g+(h.e=m+v*d-1)+1,_,b)}else h.e=v,h.r=+b;return h}}();function fe(s,a,u,w){var p,g,_,l,y;if(u==null?u=te:G(u,0,8),!s.c)return s.toString();if(p=s.c[0],_=s.e,a==null)y=J(s.c),y=w==1||w==2&&(_<=de||_>=ye)?C(y,_):Z(y,_,"0");else if(s=ve(new N(s),a,u),g=s.e,y=J(s.c),l=y.length,w==1||w==2&&(a<=g||g<=de)){for(;l<a;y+="0",l++);y=C(y,g)}else if(a-=_,y=Z(y,g,"0"),g+1>l){if(--a>0)for(y+=".";a--;y+="0");}else if(a+=g-l,a>0)for(g+1==l&&(y+=".");a--;y+="0");return s.s<0&&p?"-"+y:y}function Bt(s,a){for(var u,w=1,p=new N(s[0]);w<s.length;w++)if(u=new N(s[w]),u.s)a.call(p,u)&&(p=u);else{p=u;break}return p}function ft(s,a,u){for(var w=1,p=a.length;!a[--p];a.pop());for(p=a[0];p>=10;p/=10,w++);return(u=w+u*d-1)>we?s.c=s.e=null:u<xe?s.c=[s.e=0]:(s.e=u,s.c=a),s}se=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,a=/^([^.]+)\.$/,u=/^\.([^.]+)$/,w=/^-?(Infinity|NaN)$/,p=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(g,_,l,y){var v,m=l?_:_.replace(p,"");if(w.test(m))g.s=isNaN(m)?null:m<0?-1:1;else{if(!l&&(m=m.replace(s,function(b,M,D){return v=(D=D.toLowerCase())=="x"?16:D=="b"?2:8,!y||y==v?M:b}),y&&(v=y,m=m.replace(a,"$1").replace(u,"0.$1")),_!=m))return new N(m,v);if(N.DEBUG)throw Error(o+"Not a"+(y?" base "+y:"")+" number: "+_);g.s=null}g.c=g.e=null}}();function ve(s,a,u,w){var p,g,_,l,y,v,m,b=s.c,M=E;if(b){e:{for(p=1,l=b[0];l>=10;l/=10,p++);if(g=a-p,g<0)g+=d,_=a,y=b[v=0],m=y/M[p-_-1]%10|0;else if(v=n((g+1)/d),v>=b.length)if(w){for(;b.length<=v;b.push(0));y=m=0,p=1,g%=d,_=g-d+1}else break e;else{for(y=l=b[v],p=1;l>=10;l/=10,p++);g%=d,_=g-d+p,m=_<0?0:y/M[p-_-1]%10|0}if(w=w||a<0||b[v+1]!=null||(_<0?y:y%M[p-_-1]),w=u<4?(m||w)&&(u==0||u==(s.s<0?3:2)):m>5||m==5&&(u==4||w||u==6&&(g>0?_>0?y/M[p-_]:0:b[v-1])%10&1||u==(s.s<0?8:7)),a<1||!b[0])return b.length=0,w?(a-=s.e+1,b[0]=M[(d-a%d)%d],s.e=-a||0):b[0]=s.e=0,s;if(g==0?(b.length=v,l=1,v--):(b.length=v+1,l=M[d-g],b[v]=_>0?i(y/M[p-_]%M[_])*l:0),w)for(;;)if(v==0){for(g=1,_=b[0];_>=10;_/=10,g++);for(_=b[0]+=l,l=1;_>=10;_/=10,l++);g!=l&&(s.e++,b[0]==c&&(b[0]=1));break}else{if(b[v]+=l,b[v]!=c)break;b[v--]=0,l=1}for(g=b.length;b[--g]===0;b.pop());}s.e>we?s.c=s.e=null:s.e<xe&&(s.c=[s.e=0])}return s}function Te(s){var a,u=s.e;return u===null?s.toString():(a=J(s.c),a=u<=de||u>=ye?C(a,u):Z(a,u,"0"),s.s<0?"-"+a:a)}return x.absoluteValue=x.abs=function(){var s=new N(this);return s.s<0&&(s.s=1),s},x.comparedTo=function(s,a){return oe(this,new N(s,a))},x.decimalPlaces=x.dp=function(s,a){var u,w,p,g=this;if(s!=null)return G(s,0,O),a==null?a=te:G(a,0,8),ve(new N(g),s+g.e+1,a);if(!(u=g.c))return null;if(w=((p=u.length-1)-V(this.e/d))*d,p=u[p])for(;p%10==0;p/=10,w--);return w<0&&(w=0),w},x.dividedBy=x.div=function(s,a){return F(this,new N(s,a),re,te)},x.dividedToIntegerBy=x.idiv=function(s,a){return F(this,new N(s,a),0,1)},x.exponentiatedBy=x.pow=function(s,a){var u,w,p,g,_,l,y,v,m,b=this;if(s=new N(s),s.c&&!s.isInteger())throw Error(o+"Exponent not an integer: "+Te(s));if(a!=null&&(a=new N(a)),l=s.e>14,!b.c||!b.c[0]||b.c[0]==1&&!b.e&&b.c.length==1||!s.c||!s.c[0])return m=new N(Math.pow(+Te(b),l?2-P(s):+Te(s))),a?m.mod(a):m;if(y=s.s<0,a){if(a.c?!a.c[0]:!a.s)return new N(NaN);w=!y&&b.isInteger()&&a.isInteger(),w&&(b=b.mod(a))}else{if(s.e>9&&(b.e>0||b.e<-1||(b.e==0?b.c[0]>1||l&&b.c[1]>=24e7:b.c[0]<8e13||l&&b.c[0]<=9999975e7)))return g=b.s<0&&P(s)?-0:0,b.e>-1&&(g=1/g),new N(y?1/g:g);Oe&&(g=n(Oe/d+2))}for(l?(u=new N(.5),y&&(s.s=1),v=P(s)):(p=Math.abs(+Te(s)),v=p%2),m=new N(ee);;){if(v){if(m=m.times(b),!m.c)break;g?m.c.length>g&&(m.c.length=g):w&&(m=m.mod(a))}if(p){if(p=i(p/2),p===0)break;v=p%2}else if(s=s.times(u),ve(s,s.e+1,1),s.e>14)v=P(s);else{if(p=+Te(s),p===0)break;v=p%2}b=b.times(b),g?b.c&&b.c.length>g&&(b.c.length=g):w&&(b=b.mod(a))}return w?m:(y&&(m=ee.div(m)),a?m.mod(a):g?ve(m,Oe,te,_):m)},x.integerValue=function(s){var a=new N(this);return s==null?s=te:G(s,0,8),ve(a,a.e+1,s)},x.isEqualTo=x.eq=function(s,a){return oe(this,new N(s,a))===0},x.isFinite=function(){return!!this.c},x.isGreaterThan=x.gt=function(s,a){return oe(this,new N(s,a))>0},x.isGreaterThanOrEqualTo=x.gte=function(s,a){return(a=oe(this,new N(s,a)))===1||a===0},x.isInteger=function(){return!!this.c&&V(this.e/d)>this.c.length-2},x.isLessThan=x.lt=function(s,a){return oe(this,new N(s,a))<0},x.isLessThanOrEqualTo=x.lte=function(s,a){return(a=oe(this,new N(s,a)))===-1||a===0},x.isNaN=function(){return!this.s},x.isNegative=function(){return this.s<0},x.isPositive=function(){return this.s>0},x.isZero=function(){return!!this.c&&this.c[0]==0},x.minus=function(s,a){var u,w,p,g,_=this,l=_.s;if(s=new N(s,a),a=s.s,!l||!a)return new N(NaN);if(l!=a)return s.s=-a,_.plus(s);var y=_.e/d,v=s.e/d,m=_.c,b=s.c;if(!y||!v){if(!m||!b)return m?(s.s=-a,s):new N(b?_:NaN);if(!m[0]||!b[0])return b[0]?(s.s=-a,s):new N(m[0]?_:te==3?-0:0)}if(y=V(y),v=V(v),m=m.slice(),l=y-v){for((g=l<0)?(l=-l,p=m):(v=y,p=b),p.reverse(),a=l;a--;p.push(0));p.reverse()}else for(w=(g=(l=m.length)<(a=b.length))?l:a,l=a=0;a<w;a++)if(m[a]!=b[a]){g=m[a]<b[a];break}if(g&&(p=m,m=b,b=p,s.s=-s.s),a=(w=b.length)-(u=m.length),a>0)for(;a--;m[u++]=0);for(a=c-1;w>l;){if(m[--w]<b[w]){for(u=w;u&&!m[--u];m[u]=a);--m[u],m[w]+=c}m[w]-=b[w]}for(;m[0]==0;m.splice(0,1),--v);return m[0]?ft(s,m,v):(s.s=te==3?-1:1,s.c=[s.e=0],s)},x.modulo=x.mod=function(s,a){var u,w,p=this;return s=new N(s,a),!p.c||!s.s||s.c&&!s.c[0]?new N(NaN):!s.c||p.c&&!p.c[0]?new N(p):(qe==9?(w=s.s,s.s=1,u=F(p,s,0,3),s.s=w,u.s*=w):u=F(p,s,0,qe),s=p.minus(u.times(s)),!s.c[0]&&qe==1&&(s.s=p.s),s)},x.multipliedBy=x.times=function(s,a){var u,w,p,g,_,l,y,v,m,b,M,D,Y,h,A,S=this,T=S.c,U=(s=new N(s,a)).c;if(!T||!U||!T[0]||!U[0])return!S.s||!s.s||T&&!T[0]&&!U||U&&!U[0]&&!T?s.c=s.e=s.s=null:(s.s*=S.s,!T||!U?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(w=V(S.e/d)+V(s.e/d),s.s*=S.s,y=T.length,b=U.length,y<b&&(Y=T,T=U,U=Y,p=y,y=b,b=p),p=y+b,Y=[];p--;Y.push(0));for(h=c,A=k,p=b;--p>=0;){for(u=0,M=U[p]%A,D=U[p]/A|0,_=y,g=p+_;g>p;)v=T[--_]%A,m=T[_]/A|0,l=D*v+m*M,v=M*v+l%A*A+Y[g]+u,u=(v/h|0)+(l/A|0)+D*m,Y[g--]=v%h;Y[g]=u}return u?++w:Y.splice(0,1),ft(s,Y,w)},x.negated=function(){var s=new N(this);return s.s=-s.s||null,s},x.plus=function(s,a){var u,w=this,p=w.s;if(s=new N(s,a),a=s.s,!p||!a)return new N(NaN);if(p!=a)return s.s=-a,w.minus(s);var g=w.e/d,_=s.e/d,l=w.c,y=s.c;if(!g||!_){if(!l||!y)return new N(p/0);if(!l[0]||!y[0])return y[0]?s:new N(l[0]?w:p*0)}if(g=V(g),_=V(_),l=l.slice(),p=g-_){for(p>0?(_=g,u=y):(p=-p,u=l),u.reverse();p--;u.push(0));u.reverse()}for(p=l.length,a=y.length,p-a<0&&(u=y,y=l,l=u,a=p),p=0;a;)p=(l[--a]=l[a]+y[a]+p)/c|0,l[a]=c===l[a]?0:l[a]%c;return p&&(l=[p].concat(l),++_),ft(s,l,_)},x.precision=x.sd=function(s,a){var u,w,p,g=this;if(s!=null&&s!==!!s)return G(s,1,O),a==null?a=te:G(a,0,8),ve(new N(g),s,a);if(!(u=g.c))return null;if(p=u.length-1,w=p*d+1,p=u[p]){for(;p%10==0;p/=10,w--);for(p=u[0];p>=10;p/=10,w++);}return s&&g.e+1>w&&(w=g.e+1),w},x.shiftedBy=function(s){return G(s,-I,I),this.times("1e"+s)},x.squareRoot=x.sqrt=function(){var s,a,u,w,p,g=this,_=g.c,l=g.s,y=g.e,v=re+4,m=new N("0.5");if(l!==1||!_||!_[0])return new N(!l||l<0&&(!_||_[0])?NaN:_?g:1/0);if(l=Math.sqrt(+Te(g)),l==0||l==1/0?(a=J(_),(a.length+y)%2==0&&(a+="0"),l=Math.sqrt(+a),y=V((y+1)/2)-(y<0||y%2),l==1/0?a="5e"+y:(a=l.toExponential(),a=a.slice(0,a.indexOf("e")+1)+y),u=new N(a)):u=new N(l+""),u.c[0]){for(y=u.e,l=y+v,l<3&&(l=0);;)if(p=u,u=m.times(p.plus(F(g,p,v,1))),J(p.c).slice(0,l)===(a=J(u.c)).slice(0,l))if(u.e<y&&--l,a=a.slice(l-3,l+1),a=="9999"||!w&&a=="4999"){if(!w&&(ve(p,p.e+re+2,0),p.times(p).eq(g))){u=p;break}v+=4,l+=4,w=1}else{(!+a||!+a.slice(1)&&a.charAt(0)=="5")&&(ve(u,u.e+re+2,1),s=!u.times(u).eq(g));break}}return ve(u,u.e+re+1,te,s)},x.toExponential=function(s,a){return s!=null&&(G(s,0,O),s++),fe(this,s,a,1)},x.toFixed=function(s,a){return s!=null&&(G(s,0,O),s=s+this.e+1),fe(this,s,a)},x.toFormat=function(s,a,u){var w,p=this;if(u==null)s!=null&&a&&typeof a=="object"?(u=a,a=null):s&&typeof s=="object"?(u=s,s=a=null):u=Xe;else if(typeof u!="object")throw Error(o+"Argument not an object: "+u);if(w=p.toFixed(s,a),p.c){var g,_=w.split("."),l=+u.groupSize,y=+u.secondaryGroupSize,v=u.groupSeparator||"",m=_[0],b=_[1],M=p.s<0,D=M?m.slice(1):m,Y=D.length;if(y&&(g=l,l=y,y=g,Y-=g),l>0&&Y>0){for(g=Y%l||l,m=D.substr(0,g);g<Y;g+=l)m+=v+D.substr(g,l);y>0&&(m+=v+D.slice(g)),M&&(m="-"+m)}w=b?m+(u.decimalSeparator||"")+((y=+u.fractionGroupSize)?b.replace(new RegExp("\\d{"+y+"}\\B","g"),"$&"+(u.fractionGroupSeparator||"")):b):m}return(u.prefix||"")+w+(u.suffix||"")},x.toFraction=function(s){var a,u,w,p,g,_,l,y,v,m,b,M,D=this,Y=D.c;if(s!=null&&(l=new N(s),!l.isInteger()&&(l.c||l.s!==1)||l.lt(ee)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+Te(l));if(!Y)return new N(D);for(a=new N(ee),v=u=new N(ee),w=y=new N(ee),M=J(Y),g=a.e=M.length-D.e-1,a.c[0]=E[(_=g%d)<0?d+_:_],s=!s||l.comparedTo(a)>0?g>0?a:v:l,_=we,we=1/0,l=new N(M),y.c[0]=0;m=F(l,a,0,1),p=u.plus(m.times(w)),p.comparedTo(s)!=1;)u=w,w=p,v=y.plus(m.times(p=v)),y=p,a=l.minus(m.times(p=a)),l=p;return p=F(s.minus(u),w,0,1),y=y.plus(p.times(v)),u=u.plus(p.times(w)),y.s=v.s=D.s,g=g*2,b=F(v,w,g,te).minus(D).abs().comparedTo(F(y,u,g,te).minus(D).abs())<1?[v,w]:[y,u],we=_,b},x.toNumber=function(){return+Te(this)},x.toPrecision=function(s,a){return s!=null&&G(s,1,O),fe(this,s,a,2)},x.toString=function(s){var a,u=this,w=u.s,p=u.e;return p===null?w?(a="Infinity",w<0&&(a="-"+a)):a="NaN":(s==null?a=p<=de||p>=ye?C(J(u.c),p):Z(J(u.c),p,"0"):s===10&&ke?(u=ve(new N(u),re+p+1,te),a=Z(J(u.c),u.e,"0")):(G(s,2,ie.length,"Base"),a=ne(Z(J(u.c),p,"0"),10,s,w,!0)),w<0&&u.c[0]&&(a="-"+a)),a},x.valueOf=x.toJSON=function(){return Te(this)},x._isBigNumber=!0,q!=null&&N.set(q),N}function V(q){var F=q|0;return q>0||q===F?F:F-1}function J(q){for(var F,ne,se=1,x=q.length,ee=q[0]+"";se<x;){for(F=q[se++]+"",ne=d-F.length;ne--;F="0"+F);ee+=F}for(x=ee.length;ee.charCodeAt(--x)===48;);return ee.slice(0,x+1||1)}function oe(q,F){var ne,se,x=q.c,ee=F.c,re=q.s,te=F.s,de=q.e,ye=F.e;if(!re||!te)return null;if(ne=x&&!x[0],se=ee&&!ee[0],ne||se)return ne?se?0:-te:re;if(re!=te)return re;if(ne=re<0,se=de==ye,!x||!ee)return se?0:!x^ne?1:-1;if(!se)return de>ye^ne?1:-1;for(te=(de=x.length)<(ye=ee.length)?de:ye,re=0;re<te;re++)if(x[re]!=ee[re])return x[re]>ee[re]^ne?1:-1;return de==ye?0:de>ye^ne?1:-1}function G(q,F,ne,se){if(q<F||q>ne||q!==i(q))throw Error(o+(se||"Argument")+(typeof q=="number"?q<F||q>ne?" out of range: ":" not an integer: ":" not a primitive number: ")+String(q))}function P(q){var F=q.c.length-1;return V(q.e/d)==F&&q.c[F]%2!=0}function C(q,F){return(q.length>1?q.charAt(0)+"."+q.slice(1):q)+(F<0?"e":"e+")+F}function Z(q,F,ne){var se,x;if(F<0){for(x=ne+".";++F;x+=ne);q=x+q}else if(se=q.length,++F>se){for(x=ne,F-=se;--F;x+=ne);q+=x}else F<se&&(q=q.slice(0,F)+"."+q.slice(F));return q}e=L(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof ar<"u"&&ar.exports?ar.exports=e:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=e)})(go)});var vo=R(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});var Tf=mo(),wo=class{constructor(){this.BigNum=(e,t)=>{let n=Tf.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};Yr.default=wo});var Qr=R((Sc,_o)=>{"use strict";_o.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var _e=R((bc,So)=>{"use strict";var Pf=Qr(),je=Object.prototype.toString;function rn(r){return je.call(r)==="[object Array]"}function en(r){return typeof r>"u"}function xf(r){return r!==null&&!en(r)&&r.constructor!==null&&!en(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Nf(r){return je.call(r)==="[object ArrayBuffer]"}function kf(r){return typeof FormData<"u"&&r instanceof FormData}function If(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function Uf(r){return typeof r=="string"}function Rf(r){return typeof r=="number"}function Ao(r){return r!==null&&typeof r=="object"}function ur(r){if(je.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Cf(r){return je.call(r)==="[object Date]"}function Bf(r){return je.call(r)==="[object File]"}function qf(r){return je.call(r)==="[object Blob]"}function Eo(r){return je.call(r)==="[object Function]"}function Mf(r){return Ao(r)&&Eo(r.pipe)}function Df(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function Ff(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Lf(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function nn(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),rn(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function tn(){var r={};function e(i,o){ur(r[o])&&ur(i)?r[o]=tn(r[o],i):ur(i)?r[o]=tn({},i):rn(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)nn(arguments[t],e);return r}function $f(r,e,t){return nn(e,function(i,o){t&&typeof i=="function"?r[o]=Pf(i,t):r[o]=i}),r}function Hf(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}So.exports={isArray:rn,isArrayBuffer:Nf,isBuffer:xf,isFormData:kf,isArrayBufferView:If,isString:Uf,isNumber:Rf,isObject:Ao,isPlainObject:ur,isUndefined:en,isDate:Cf,isFile:Bf,isBlob:qf,isFunction:Eo,isStream:Mf,isURLSearchParams:Df,isStandardBrowserEnv:Lf,forEach:nn,merge:tn,extend:$f,trim:Ff,stripBOM:Hf}});var on=R((Oc,Oo)=>{"use strict";var nt=_e();function bo(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Oo.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(nt.isURLSearchParams(t))i=t.toString();else{var o=[];nt.forEach(t,function(d,I){d===null||typeof d>"u"||(nt.isArray(d)?I=I+"[]":d=[d],nt.forEach(d,function(k){nt.isDate(k)?k=k.toISOString():nt.isObject(k)&&(k=JSON.stringify(k)),o.push(bo(I)+"="+bo(k))}))}),i=o.join("&")}if(i){var f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Po=R((Tc,To)=>{"use strict";var Wf=_e();function fr(){this.handlers=[]}fr.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};fr.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};fr.prototype.forEach=function(e){Wf.forEach(this.handlers,function(n){n!==null&&e(n)})};To.exports=fr});var No=R((Pc,xo)=>{"use strict";var Gf=_e();xo.exports=function(e,t){Gf.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var sn=R((xc,ko)=>{"use strict";ko.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var an=R((Nc,Io)=>{"use strict";var jf=sn();Io.exports=function(e,t,n,i,o){var f=new Error(e);return jf(f,t,n,i,o)}});var Ro=R((kc,Uo)=>{"use strict";var zf=an();Uo.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(zf("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Bo=R((Ic,Co)=>{"use strict";var lr=_e();Co.exports=lr.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,f,c){var d=[];d.push(t+"="+encodeURIComponent(n)),lr.isNumber(i)&&d.push("expires="+new Date(i).toGMTString()),lr.isString(o)&&d.push("path="+o),lr.isString(f)&&d.push("domain="+f),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Mo=R((Uc,qo)=>{"use strict";qo.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Fo=R((Rc,Do)=>{"use strict";Do.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var $o=R((Cc,Lo)=>{"use strict";var Vf=Mo(),Jf=Fo();Lo.exports=function(e,t){return e&&!Vf(t)?Jf(e,t):t}});var Wo=R((Bc,Ho)=>{"use strict";var un=_e(),Xf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Ho.exports=function(e){var t={},n,i,o;return e&&un.forEach(e.split(`
`),function(c){if(o=c.indexOf(":"),n=un.trim(c.substr(0,o)).toLowerCase(),i=un.trim(c.substr(o+1)),n){if(t[n]&&Xf.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var zo=R((qc,jo)=>{"use strict";var Go=_e();jo.exports=Go.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var f=o;return e&&(t.setAttribute("href",f),f=t.href),t.setAttribute("href",f),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(f){var c=Go.isString(f)?i(f):f;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}()});var mt=R((Mc,Vo)=>{"use strict";function fn(r){this.message=r}fn.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};fn.prototype.__CANCEL__=!0;Vo.exports=fn});var cn=R((Dc,Jo)=>{"use strict";var cr=_e(),Kf=Ro(),Zf=Bo(),Yf=on(),Qf=$o(),el=Wo(),tl=zo(),ln=an(),rl=wt(),nl=mt();Jo.exports=function(e){return new Promise(function(n,i){var o=e.data,f=e.headers,c=e.responseType,d;function I(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}cr.isFormData(o)&&delete f["Content-Type"];var E=new XMLHttpRequest;if(e.auth){var k=e.auth.username||"",O=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(k+":"+O)}var L=Qf(e.baseURL,e.url);E.open(e.method.toUpperCase(),Yf(L,e.params,e.paramsSerializer),!0),E.timeout=e.timeout;function V(){if(!!E){var oe="getAllResponseHeaders"in E?el(E.getAllResponseHeaders()):null,G=!c||c==="text"||c==="json"?E.responseText:E.response,P={data:G,status:E.status,statusText:E.statusText,headers:oe,config:e,request:E};Kf(function(Z){n(Z),I()},function(Z){i(Z),I()},P),E=null}}if("onloadend"in E?E.onloadend=V:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(V)},E.onabort=function(){!E||(i(ln("Request aborted",e,"ECONNABORTED",E)),E=null)},E.onerror=function(){i(ln("Network Error",e,null,E)),E=null},E.ontimeout=function(){var G="timeout of "+e.timeout+"ms exceeded",P=e.transitional||rl.transitional;e.timeoutErrorMessage&&(G=e.timeoutErrorMessage),i(ln(G,e,P.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},cr.isStandardBrowserEnv()){var J=(e.withCredentials||tl(L))&&e.xsrfCookieName?Zf.read(e.xsrfCookieName):void 0;J&&(f[e.xsrfHeaderName]=J)}"setRequestHeader"in E&&cr.forEach(f,function(G,P){typeof o>"u"&&P.toLowerCase()==="content-type"?delete f[P]:E.setRequestHeader(P,G)}),cr.isUndefined(e.withCredentials)||(E.withCredentials=!!e.withCredentials),c&&c!=="json"&&(E.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&E.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(oe){!E||(i(!oe||oe&&oe.type?new nl("canceled"):oe),E.abort(),E=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),o||(o=null),E.send(o)})}});var wt=R((Fc,Zo)=>{"use strict";var ge=_e(),Xo=No(),il=sn(),ol={"Content-Type":"application/x-www-form-urlencoded"};function Ko(r,e){!ge.isUndefined(r)&&ge.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function sl(){var r;return typeof XMLHttpRequest<"u"?r=cn():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=cn()),r}function al(r,e,t){if(ge.isString(r))try{return(e||JSON.parse)(r),ge.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var pr={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:sl(),transformRequest:[function(e,t){return Xo(t,"Accept"),Xo(t,"Content-Type"),ge.isFormData(e)||ge.isArrayBuffer(e)||ge.isBuffer(e)||ge.isStream(e)||ge.isFile(e)||ge.isBlob(e)?e:ge.isArrayBufferView(e)?e.buffer:ge.isURLSearchParams(e)?(Ko(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ge.isObject(e)||t&&t["Content-Type"]==="application/json"?(Ko(t,"application/json"),al(e)):e}],transformResponse:[function(e){var t=this.transitional||pr.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&ge.isString(e)&&e.length)try{return JSON.parse(e)}catch(f){if(o)throw f.name==="SyntaxError"?il(f,this,"E_JSON_PARSE"):f}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ge.forEach(["delete","get","head"],function(e){pr.headers[e]={}});ge.forEach(["post","put","patch"],function(e){pr.headers[e]=ge.merge(ol)});Zo.exports=pr});var Qo=R((Lc,Yo)=>{"use strict";var ul=_e(),fl=wt();Yo.exports=function(e,t,n){var i=this||fl;return ul.forEach(n,function(f){e=f.call(i,e,t)}),e}});var pn=R(($c,es)=>{"use strict";es.exports=function(e){return!!(e&&e.__CANCEL__)}});var ns=R((Hc,rs)=>{"use strict";var ts=_e(),hn=Qo(),ll=pn(),cl=wt(),pl=mt();function dn(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new pl("canceled")}rs.exports=function(e){dn(e),e.headers=e.headers||{},e.data=hn.call(e,e.data,e.headers,e.transformRequest),e.headers=ts.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ts.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||cl.adapter;return t(e).then(function(i){return dn(e),i.data=hn.call(e,i.data,i.headers,e.transformResponse),i},function(i){return ll(i)||(dn(e),i&&i.response&&(i.response.data=hn.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var yn=R((Wc,is)=>{"use strict";var Ae=_e();is.exports=function(e,t){t=t||{};var n={};function i(E,k){return Ae.isPlainObject(E)&&Ae.isPlainObject(k)?Ae.merge(E,k):Ae.isPlainObject(k)?Ae.merge({},k):Ae.isArray(k)?k.slice():k}function o(E){if(Ae.isUndefined(t[E])){if(!Ae.isUndefined(e[E]))return i(void 0,e[E])}else return i(e[E],t[E])}function f(E){if(!Ae.isUndefined(t[E]))return i(void 0,t[E])}function c(E){if(Ae.isUndefined(t[E])){if(!Ae.isUndefined(e[E]))return i(void 0,e[E])}else return i(void 0,t[E])}function d(E){if(E in t)return i(e[E],t[E]);if(E in e)return i(void 0,e[E])}var I={url:f,method:f,data:f,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d};return Ae.forEach(Object.keys(e).concat(Object.keys(t)),function(k){var O=I[k]||o,L=O(k);Ae.isUndefined(L)&&O!==d||(n[k]=L)}),n}});var gn=R((Gc,os)=>{os.exports={version:"0.22.0"}});var us=R((jc,as)=>{"use strict";var hl=gn().version,mn={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){mn[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var ss={};mn.transitional=function(e,t,n){function i(o,f){return"[Axios v"+hl+"] Transitional option '"+o+"'"+f+(n?". "+n:"")}return function(o,f,c){if(e===!1)throw new Error(i(f," has been removed"+(t?" in "+t:"")));return t&&!ss[f]&&(ss[f]=!0,console.warn(i(f," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,f,c):!0}};function dl(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var o=n[i],f=e[o];if(f){var c=r[o],d=c===void 0||f(c,o,r);if(d!==!0)throw new TypeError("option "+o+" must be "+d);continue}if(t!==!0)throw Error("Unknown option "+o)}}as.exports={assertOptions:dl,validators:mn}});var ds=R((zc,hs)=>{"use strict";var cs=_e(),yl=on(),fs=Po(),ls=ns(),hr=yn(),ps=us(),it=ps.validators;function vt(r){this.defaults=r,this.interceptors={request:new fs,response:new fs}}vt.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=hr(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&ps.assertOptions(t,{silentJSONParsing:it.transitional(it.boolean),forcedJSONParsing:it.transitional(it.boolean),clarifyTimeoutError:it.transitional(it.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(e)===!1||(i=i&&O.synchronous,n.unshift(O.fulfilled,O.rejected))});var o=[];this.interceptors.response.forEach(function(O){o.push(O.fulfilled,O.rejected)});var f;if(!i){var c=[ls,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(o),f=Promise.resolve(e);c.length;)f=f.then(c.shift(),c.shift());return f}for(var d=e;n.length;){var I=n.shift(),E=n.shift();try{d=I(d)}catch(k){E(k);break}}try{f=ls(d)}catch(k){return Promise.reject(k)}for(;o.length;)f=f.then(o.shift(),o.shift());return f};vt.prototype.getUri=function(e){return e=hr(this.defaults,e),yl(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};cs.forEach(["delete","get","head","options"],function(e){vt.prototype[e]=function(t,n){return this.request(hr(n||{},{method:e,url:t,data:(n||{}).data}))}});cs.forEach(["post","put","patch"],function(e){vt.prototype[e]=function(t,n,i){return this.request(hr(i||{},{method:e,url:t,data:n}))}});hs.exports=vt});var gs=R((Vc,ys)=>{"use strict";var gl=mt();function ot(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(!!t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(f){t.subscribe(f),i=f}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new gl(i),e(t.reason))})}ot.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ot.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};ot.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};ot.source=function(){var e,t=new ot(function(i){e=i});return{token:t,cancel:e}};ys.exports=ot});var ws=R((Jc,ms)=>{"use strict";ms.exports=function(e){return function(n){return e.apply(null,n)}}});var _s=R((Xc,vs)=>{"use strict";vs.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var Ss=R((Kc,wn)=>{"use strict";var As=_e(),ml=Qr(),dr=ds(),wl=yn(),vl=wt();function Es(r){var e=new dr(r),t=ml(dr.prototype.request,e);return As.extend(t,dr.prototype,e),As.extend(t,e),t.create=function(i){return Es(wl(r,i))},t}var Re=Es(vl);Re.Axios=dr;Re.Cancel=mt();Re.CancelToken=gs();Re.isCancel=pn();Re.VERSION=gn().version;Re.all=function(e){return Promise.all(e)};Re.spread=ws();Re.isAxiosError=_s();wn.exports=Re;wn.exports.default=Re});var Os=R((Zc,bs)=>{bs.exports=Ss()});var Ps=R(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var _l=Os(),Ts=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e=_l.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(t=>(this.config.logger(`Requesting: ${t.baseURL}/${t.url}`),t)),e.interceptors.response.use(t=>(this.config.logger(`Response:   ${t.config.url} - ${t.status}`),t))),e}};vn.default=Ts});var Ns=R(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var xs=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};_n.default=xs});var At=R(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.getError=void 0;var ks=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};_t.default=ks;function Al(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch(t){}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:r.statusText||"unknown"}_t.getError=Al});var Tn=R(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.debug=z.validatePath=z.arrayCompare=z.bufferToInt=z.intToBuffer=z.arrayFlatten=z.generateProofs=z.buildLayers=z.generateTransactionChunks=z.generateTree=z.computeRootHash=z.generateLeaves=z.chunkData=z.MIN_CHUNK_SIZE=z.MAX_CHUNK_SIZE=void 0;var yr=Pn(),Is=Ce();z.MAX_CHUNK_SIZE=256*1024;z.MIN_CHUNK_SIZE=32*1024;var St=32,st=32;async function En(r){let e=[],t=r,n=0;for(;t.byteLength>=z.MAX_CHUNK_SIZE;){let i=z.MAX_CHUNK_SIZE,o=t.byteLength-z.MAX_CHUNK_SIZE;o>0&&o<z.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let f=t.slice(0,i),c=await yr.default.crypto.hash(f);n+=f.byteLength,e.push({dataHash:c,minByteRange:n-f.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await yr.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}z.chunkData=En;async function Sn(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await he(await Promise.all([he(e),he(bt(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}z.generateLeaves=Sn;async function El(r){return(await Us(r)).id}z.computeRootHash=El;async function Us(r){return await gr(await Sn(await En(r)))}z.generateTree=Us;async function Sl(r){let e=await En(r),t=await Sn(e),n=await gr(t),i=await Rs(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}z.generateTransactionChunks=Sl;async function gr(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await bl(r[n],r[n+1]));return gr(t,e+1)}z.buildLayers=gr;function Rs(r){let e=An(r);return Array.isArray(e)?bn(e):[e]}z.generateProofs=Rs;function An(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,Is.concatBuffers)([e,r.dataHash,bt(r.maxByteRange)])};if(r.type=="branch"){let n=(0,Is.concatBuffers)([e,r.leftChild.id,r.rightChild.id,bt(r.byteRange)]);return[An(r.leftChild,n,t+1),An(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function bn(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...bn(t)):e.push(t)}),e}z.arrayFlatten=bn;async function bl(r,e){return e?{type:"branch",id:await he([await he(r.id),await he(e.id),await he(bt(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function he(r){return Array.isArray(r)&&(r=yr.default.utils.concatBuffers(r)),new Uint8Array(await yr.default.crypto.hash(r))}function bt(r){let e=new Uint8Array(St);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}z.intToBuffer=bt;function On(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}z.bufferToInt=On;var Ol=(r,e)=>r.every((t,n)=>e[n]===t);z.arrayCompare=Ol;async function Et(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return Et(r,0,n-1,n,i);if(e<0)return Et(r,0,0,n,i);if(i.length==st+St){let k=i.slice(0,st),O=i.slice(k.length,k.length+St),L=await he([await he(k),await he(O)]);return(0,z.arrayCompare)(r,L)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,st),f=i.slice(o.length,o.length+st),c=i.slice(o.length+f.length,o.length+f.length+St),d=On(c),I=i.slice(o.length+f.length+c.length),E=await he([await he(o),await he(f),await he(c)]);return(0,z.arrayCompare)(r,E)?e<d?await Et(o,e,t,Math.min(n,d),I):await Et(f,e,Math.max(t,d),n,I):!1}z.validatePath=Et;async function Cs(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,st),n=r.slice(t.length,t.length+st),i=r.slice(t.length+n.length,t.length+n.length+St),o=On(i),f=r.slice(t.length+n.length+i.length),c=await he([await he(t),await he(n),await he(i)]),d=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(c)}`;return Cs(f,d)}z.debug=Cs});var Ds=R(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.TransactionUploader=void 0;var Bs=Ot(),Tl=Ce(),xn=At(),Pl=Tn(),qs=1,xl=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Ms=1e3*40,mr=class{constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new Bs.default(Object.assign({},t,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Ms-Date.now(),Ms);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(f=>setTimeout(f,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,Pl.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),Tl.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(f=>(console.error(f.message),{status:-1,data:{error:f.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,xn.getError)(o),xl.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Bs.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new mr(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=qs){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=qs;return}throw this.lastResponseError=(0,xn.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,xn.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};wr.TransactionUploader=mr});var vr=R((np,Fs)=>{Fs.exports={}});var $s=R(Ve=>{"use strict";var ze=Ve&&Ve.__await||function(r){return this instanceof ze?(this.v=r,this):new ze(r)},Nl=Ve&&Ve.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},f("next"),f("throw"),f("return"),i[Symbol.asyncIterator]=function(){return this},i;function f(O){n[O]&&(i[O]=function(L){return new Promise(function(V,J){o.push([O,L,V,J])>1||c(O,L)})})}function c(O,L){try{d(n[O](L))}catch(V){k(o[0][3],V)}}function d(O){O.value instanceof ze?Promise.resolve(O.value.v).then(I,E):k(o[0][2],O)}function I(O){c("next",O)}function E(O){c("throw",O)}function k(O,L){O(L),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(Ve,"__esModule",{value:!0});var Nn=At(),Be=Ot(),Tt=Ce(),kn=Ds();vr();var Ls=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new Be.default(Object.assign(Object.assign({},t.data),{data:i}))}return new Be.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new Nn.default("TX_NOT_FOUND"):t.status==410?new Nn.default("TX_FAILED"):new Nn.default("TX_INVALID")}fromRaw(e){return new Be.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n=await this.chunks.downloadChunkedData(e);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?Tt.bufferToString(n):Tt.bufferTob64Url(n)}async sign(e,t,n){if(!t&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch(o){}let i=await window.arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),f=await this.crypto.hash(o);e.setSignature({id:Tt.bufferTob64Url(f),owner:t.n,signature:Tt.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Tt.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new Be.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new Be.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof Be.default)&&(e=new Be.default(e)),!(e instanceof Be.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof Be.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new kn.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await kn.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await kn.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return Nl(this,arguments,function*(){let i=yield ze(this.getUploader(e,t));for(;!i.isComplete;)yield ze(i.uploadChunk()),yield yield ze(i);return yield ze(i)})}};Ve.default=Ls});var Gs=R(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var Hs=Ce();vr();var Ws=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch(t){}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Hs.bufferTob64Url(await this.crypto.hash(Hs.b64UrlToBuffer(e)))}};In.default=Ws});var Vs=R(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.SiloResource=void 0;var js=Ce(),zs=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(js.stringToBuffer(n),i),f=js.bufferTob64(o.slice(0,15)),c=await this.hash(o.slice(16,31),1);return new Un(e,f,c)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};Pt.default=zs;var Un=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};Pt.SiloResource=Un});var Ks=R(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var Js=At(),kl=Ce(),Xs=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,Js.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,Js.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return kl.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,f=new Uint8Array(n),c=0;for(;c<n;){this.api.config.logging&&console.log(`[chunk] ${c}/${n}`);let d;try{d=await this.getChunkData(o+c)}catch(I){console.error(`[chunk] Failed to fetch chunk at offset ${o+c}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gatway/node")}if(d)f.set(d,c),c+=d.length;else throw new Error(`Coudn't complete data download at ${c}/${n}`)}return f}};Rn.default=Xs});var Zs=R(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var Il=At();vr();var xt=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${xt.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new Il.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};Cn.default=xt;xt.ENDPOINT="block/hash/"});var Pn=R(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});var Ul=vo(),Rl=Ps(),Cl=Ns(),Bl=$s(),ql=Gs(),Ys=Ot(),Nt=Ce(),Ml=Vs(),Dl=Ks(),Fl=Zs(),Fe=class{constructor(e){this.api=new Rl.default(e),this.wallets=new ql.default(this.api,Fe.crypto),this.chunks=new Dl.default(this.api),this.transactions=new Bl.default(this.api,Fe.crypto,this.chunks),this.silo=new Ml.default(this.api,this.crypto,this.transactions),this.network=new Cl.default(this.api),this.blocks=new Fl.default(this.api,this.network),this.ar=new Ul.default}get crypto(){return Fe.crypto}get utils(){return Fe.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Nt.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new Ys.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let c=await this.crypto.encrypt(Nt.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Nt.bufferTob64Url(c)}if(e.data instanceof Uint8Array){let c=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(c.byteLength),i.data=Nt.bufferTob64Url(c)}let f=new Ys.default(i);return f.addTag("Silo-Name",o.getAccessKey()),f.addTag("Silo-Version","0.1.0"),f}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};Bn.default=Fe;Fe.utils=Nt});var ta=R(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});var Ee=Pn();async function Qs(r){if(Array.isArray(r)){let n=Ee.default.utils.concatBuffers([Ee.default.utils.stringToBuffer("list"),Ee.default.utils.stringToBuffer(r.length.toString())]);return await ea(r,await Ee.default.crypto.hash(n,"SHA-384"))}let e=Ee.default.utils.concatBuffers([Ee.default.utils.stringToBuffer("blob"),Ee.default.utils.stringToBuffer(r.byteLength.toString())]),t=Ee.default.utils.concatBuffers([await Ee.default.crypto.hash(e,"SHA-384"),await Ee.default.crypto.hash(r,"SHA-384")]);return await Ee.default.crypto.hash(t,"SHA-384")}qn.default=Qs;async function ea(r,e){if(r.length<1)return e;let t=Ee.default.utils.concatBuffers([e,await Qs(r[0])]),n=await Ee.default.crypto.hash(t,"SHA-384");return await ea(r.slice(1),n)}});var Ot=R(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.Tag=void 0;var pe=Ce(),Ll=ta(),$l=Tn(),Mn=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?pe.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:pe.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?pe.b64UrlToString(this[e]):pe.b64UrlToBuffer(this[e]):this[e]}},_r=class extends Mn{constructor(e,t,n=!1){super();this.name=e,this.value=t}};kt.Tag=_r;var ra=class extends Mn{constructor(e={}){super();this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=pe.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new _r(t.name,t.value)))}addTag(e,t){this.tags.push(new _r(pe.stringToB64Url(e),pe.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:pe.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,$l.generateTransactionChunks)(e),this.data_root=pe.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:pe.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:pe.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>pe.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return pe.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),pe.stringToBuffer(this.quantity),pe.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,Ll.default)([pe.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),pe.stringToBuffer(this.quantity),pe.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,pe.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};kt.default=ra});var Dn=R(()=>{var na;(function(r){(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect>"u"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,f){return function(c,d){typeof o[c]!="function"&&Object.defineProperty(o,c,{configurable:!0,writable:!0,value:d}),f&&f(c,d)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",f=typeof Object.create=="function",c={__proto__:[]}instanceof Array,d=!f&&!c,I={create:f?function(){return Y(Object.create(null))}:c?function(){return Y({__proto__:null})}:function(){return Y({})},has:d?function(h,A){return t.call(h,A)}:function(h,A){return A in h},get:d?function(h,A){return t.call(h,A)?h[A]:void 0}:function(h,A){return h[A]}},E=Object.getPrototypeOf(Function),k=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",O=!k&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:b(),L=!k&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:M(),V=!k&&typeof WeakMap=="function"?WeakMap:D(),J=new V;function oe(h,A,S,T){if(ie(S)){if(!a(h))throw new TypeError;if(!w(A))throw new TypeError;return ee(h,A)}else{if(!a(h))throw new TypeError;if(!fe(A))throw new TypeError;if(!fe(T)&&!ie(T)&&!ke(T))throw new TypeError;return ke(T)&&(T=void 0),S=s(S),re(h,A,S,T)}}e("decorate",oe);function G(h,A){function S(T,U){if(!fe(T))throw new TypeError;if(!ie(U)&&!p(U))throw new TypeError;Ne(h,A,T,U)}return S}e("metadata",G);function P(h,A,S,T){if(!fe(S))throw new TypeError;return ie(T)||(T=s(T)),Ne(h,A,S,T)}e("defineMetadata",P);function C(h,A,S){if(!fe(A))throw new TypeError;return ie(S)||(S=s(S)),de(h,A,S)}e("hasMetadata",C);function Z(h,A,S){if(!fe(A))throw new TypeError;return ie(S)||(S=s(S)),ye(h,A,S)}e("hasOwnMetadata",Z);function q(h,A,S){if(!fe(A))throw new TypeError;return ie(S)||(S=s(S)),xe(h,A,S)}e("getMetadata",q);function F(h,A,S){if(!fe(A))throw new TypeError;return ie(S)||(S=s(S)),we(h,A,S)}e("getOwnMetadata",F);function ne(h,A){if(!fe(h))throw new TypeError;return ie(A)||(A=s(A)),qe(h,A)}e("getMetadataKeys",ne);function se(h,A){if(!fe(h))throw new TypeError;return ie(A)||(A=s(A)),Oe(h,A)}e("getOwnMetadataKeys",se);function x(h,A,S){if(!fe(A))throw new TypeError;ie(S)||(S=s(S));var T=te(A,S,!1);if(ie(T)||!T.delete(h))return!1;if(T.size>0)return!0;var U=J.get(A);return U.delete(S),U.size>0||J.delete(A),!0}e("deleteMetadata",x);function ee(h,A){for(var S=h.length-1;S>=0;--S){var T=h[S],U=T(A);if(!ie(U)&&!ke(U)){if(!w(U))throw new TypeError;A=U}}return A}function re(h,A,S,T){for(var U=h.length-1;U>=0;--U){var le=h[U],H=le(A,S,T);if(!ie(H)&&!ke(H)){if(!fe(H))throw new TypeError;T=H}}return T}function te(h,A,S){var T=J.get(h);if(ie(T)){if(!S)return;T=new O,J.set(h,T)}var U=T.get(A);if(ie(U)){if(!S)return;U=new O,T.set(A,U)}return U}function de(h,A,S){var T=ye(h,A,S);if(T)return!0;var U=m(A);return ke(U)?!1:de(h,U,S)}function ye(h,A,S){var T=te(A,S,!1);return ie(T)?!1:ve(T.has(h))}function xe(h,A,S){var T=ye(h,A,S);if(T)return we(h,A,S);var U=m(A);if(!ke(U))return xe(h,U,S)}function we(h,A,S){var T=te(A,S,!1);if(!ie(T))return T.get(h)}function Ne(h,A,S,T){var U=te(S,T,!0);U.set(h,A)}function qe(h,A){var S=Oe(h,A),T=m(h);if(T===null)return S;var U=qe(T,A);if(U.length<=0)return S;if(S.length<=0)return U;for(var le=new L,H=[],W=0,B=S;W<B.length;W++){var j=B[W],$=le.has(j);$||(le.add(j),H.push(j))}for(var ue=0,ae=U;ue<ae.length;ue++){var j=ae[ue],$=le.has(j);$||(le.add(j),H.push(j))}return H}function Oe(h,A){var S=[],T=te(h,A,!1);if(ie(T))return S;for(var U=T.keys(),le=_(U),H=0;;){var W=y(le);if(!W)return S.length=H,S;var B=l(W);try{S[H]=B}catch(j){try{v(le)}finally{throw j}}H++}}function Xe(h){if(h===null)return 1;switch(typeof h){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return h===null?1:6;default:return 6}}function ie(h){return h===void 0}function ke(h){return h===null}function N(h){return typeof h=="symbol"}function fe(h){return typeof h=="object"?h!==null:typeof h=="function"}function Bt(h,A){switch(Xe(h)){case 0:return h;case 1:return h;case 2:return h;case 3:return h;case 4:return h;case 5:return h}var S=A===3?"string":A===5?"number":"default",T=g(h,i);if(T!==void 0){var U=T.call(h,S);if(fe(U))throw new TypeError;return U}return ft(h,S==="default"?"number":S)}function ft(h,A){if(A==="string"){var S=h.toString;if(u(S)){var T=S.call(h);if(!fe(T))return T}var U=h.valueOf;if(u(U)){var T=U.call(h);if(!fe(T))return T}}else{var U=h.valueOf;if(u(U)){var T=U.call(h);if(!fe(T))return T}var le=h.toString;if(u(le)){var T=le.call(h);if(!fe(T))return T}}throw new TypeError}function ve(h){return!!h}function Te(h){return""+h}function s(h){var A=Bt(h,3);return N(A)?A:Te(A)}function a(h){return Array.isArray?Array.isArray(h):h instanceof Object?h instanceof Array:Object.prototype.toString.call(h)==="[object Array]"}function u(h){return typeof h=="function"}function w(h){return typeof h=="function"}function p(h){switch(Xe(h)){case 3:return!0;case 4:return!0;default:return!1}}function g(h,A){var S=h[A];if(S!=null){if(!u(S))throw new TypeError;return S}}function _(h){var A=g(h,o);if(!u(A))throw new TypeError;var S=A.call(h);if(!fe(S))throw new TypeError;return S}function l(h){return h.value}function y(h){var A=h.next();return A.done?!1:A}function v(h){var A=h.return;A&&A.call(h)}function m(h){var A=Object.getPrototypeOf(h);if(typeof h!="function"||h===E||A!==E)return A;var S=h.prototype,T=S&&Object.getPrototypeOf(S);if(T==null||T===Object.prototype)return A;var U=T.constructor;return typeof U!="function"||U===h?A:U}function b(){var h={},A=[],S=function(){function H(W,B,j){this._index=0,this._keys=W,this._values=B,this._selector=j}return H.prototype["@@iterator"]=function(){return this},H.prototype[o]=function(){return this},H.prototype.next=function(){var W=this._index;if(W>=0&&W<this._keys.length){var B=this._selector(this._keys[W],this._values[W]);return W+1>=this._keys.length?(this._index=-1,this._keys=A,this._values=A):this._index++,{value:B,done:!1}}return{value:void 0,done:!0}},H.prototype.throw=function(W){throw this._index>=0&&(this._index=-1,this._keys=A,this._values=A),W},H.prototype.return=function(W){return this._index>=0&&(this._index=-1,this._keys=A,this._values=A),{value:W,done:!0}},H}();return function(){function H(){this._keys=[],this._values=[],this._cacheKey=h,this._cacheIndex=-2}return Object.defineProperty(H.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),H.prototype.has=function(W){return this._find(W,!1)>=0},H.prototype.get=function(W){var B=this._find(W,!1);return B>=0?this._values[B]:void 0},H.prototype.set=function(W,B){var j=this._find(W,!0);return this._values[j]=B,this},H.prototype.delete=function(W){var B=this._find(W,!1);if(B>=0){for(var j=this._keys.length,$=B+1;$<j;$++)this._keys[$-1]=this._keys[$],this._values[$-1]=this._values[$];return this._keys.length--,this._values.length--,W===this._cacheKey&&(this._cacheKey=h,this._cacheIndex=-2),!0}return!1},H.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=h,this._cacheIndex=-2},H.prototype.keys=function(){return new S(this._keys,this._values,T)},H.prototype.values=function(){return new S(this._keys,this._values,U)},H.prototype.entries=function(){return new S(this._keys,this._values,le)},H.prototype["@@iterator"]=function(){return this.entries()},H.prototype[o]=function(){return this.entries()},H.prototype._find=function(W,B){return this._cacheKey!==W&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=W)),this._cacheIndex<0&&B&&(this._cacheIndex=this._keys.length,this._keys.push(W),this._values.push(void 0)),this._cacheIndex},H}();function T(H,W){return H}function U(H,W){return W}function le(H,W){return[H,W]}}function M(){return function(){function h(){this._map=new O}return Object.defineProperty(h.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),h.prototype.has=function(A){return this._map.has(A)},h.prototype.add=function(A){return this._map.set(A,A),this},h.prototype.delete=function(A){return this._map.delete(A)},h.prototype.clear=function(){this._map.clear()},h.prototype.keys=function(){return this._map.keys()},h.prototype.values=function(){return this._map.values()},h.prototype.entries=function(){return this._map.entries()},h.prototype["@@iterator"]=function(){return this.keys()},h.prototype[o]=function(){return this.keys()},h}()}function D(){var h=16,A=I.create(),S=T();return function(){function B(){this._key=T()}return B.prototype.has=function(j){var $=U(j,!1);return $!==void 0?I.has($,this._key):!1},B.prototype.get=function(j){var $=U(j,!1);return $!==void 0?I.get($,this._key):void 0},B.prototype.set=function(j,$){var ue=U(j,!0);return ue[this._key]=$,this},B.prototype.delete=function(j){var $=U(j,!1);return $!==void 0?delete $[this._key]:!1},B.prototype.clear=function(){this._key=T()},B}();function T(){var B;do B="@@WeakMap@@"+W();while(I.has(A,B));return A[B]=!0,B}function U(B,j){if(!t.call(B,S)){if(!j)return;Object.defineProperty(B,S,{value:I.create()})}return B[S]}function le(B,j){for(var $=0;$<j;++$)B[$]=Math.random()*255|0;return B}function H(B){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(B)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(B)):le(new Uint8Array(B),B):le(new Array(B),B)}function W(){var B=H(h);B[6]=B[6]&79|64,B[8]=B[8]&191|128;for(var j="",$=0;$<h;++$){var ue=B[$];($===4||$===6||$===8)&&(j+="-"),ue<16&&(j+="0"),j+=ue.toString(16).toLowerCase()}return j}}function Y(h){return h.__=void 0,delete h.__,h}})})(na||(na={}))});var Sr=R((dp,sa)=>{var It;function Ar(r){if(typeof r!="function")throw new Error("This module should not be used in runtime. Instead, use a transformer during compilation.")}var Fn=Symbol("assertions");function Hl(r,e){let t=e;for(let n of r.slice(1))t=t[n.startsWith("[")?parseInt(n.replace("[","").replace("]","")):n];return t}function Wl(r,e,t){if(r===void 0)return"validation error";let n=Hl(e,t);try{return r+", found: "+gt().inspect(n)}catch(i){}try{return r+", found: "+JSON.stringify(n)}catch(i){}return r}var Er=class extends Error{constructor(e,t){super(Wl(e.message,e.path,t));this.name="TypeGuardError",this.path=e.path,this.reason=e.reason,this.input=t}};function Gl(r,e={}){return Dn(),function(t,n,i){let o=Reflect.getOwnMetadata(Fn,t,n)||[];Reflect.getOwnMetadata("design:returntype",t,n)===Promise?o[i]={assertion:r,options:Object.assign({async:!0},e)}:o[i]={assertion:r,options:e},Reflect.defineMetadata(Fn,o,t,n)}}function jl(r=Er){return Dn(),function(e){for(let t of Object.getOwnPropertyNames(e.prototype)){let n=Reflect.getOwnMetadata(Fn,e.prototype,t);if(n){let i=e.prototype[t];e.prototype[t]=function(...o){for(let f=0;f<n.length;f++){if(!n[f])continue;let c=n[f].assertion(o[f]);if(c!==null){let d=new r(c,o[f]);if(n[f].options.async)return Promise.reject(d);throw d}}return i.apply(this,o)}}}}}function Ln(r,e=It){return Ar(e),e(r)===null}function $n(r,e=It){Ar(e);let t=e(r);if(t===null)return r;throw new Er(t,r)}function ia(r=It){return Ar(r),e=>Ln(e,r)}function oa(r=It){return Ar(r),e=>$n(e,r)}function zl(r){It=r}sa.exports={is:Ln,assertType:$n,createIs:ia,createAssertType:oa,equals:Ln,createEquals:ia,assertEquals:$n,createAssertEquals:oa,AssertType:Gl,ValidateClass:jl,TypeGuardError:Er,setDefaultGetErrorObject:zl}});function ua(r){return class extends r{constructor(...t){super(...t);this.namespaces={arweaveWallet:{connect:()=>this.address||this.connect(),disconnect:()=>this.disconnect(),getActiveAddress:()=>this.address,getActivePublicKey:()=>this.getPublicKey(),getAllAddresses:()=>{throw"not implemented"},getWalletNames:()=>{throw"not implemented"},sign:(n,i)=>this.signTransaction(n,i),dispatch:(n,i)=>this.dispatch(n,i),encrypt:()=>{throw"not implemented"},decrypt:(n,i)=>this.decrypt(n,i),signature:(n,i)=>this.sign(n,i),getPermissions:()=>["ACCESS_ADDRESS","ACCESS_PUBLIC_KEY","ACCESS_ALL_ADDRESSES","SIGN_TRANSACTION","ENCRYPT","DECRYPT","SIGNATURE","ACCESS_ARWEAVE_CONFIG","DISPATCH"],getArweaveConfig:()=>this.getArweaveConfig()}}}postMessage(t,n,i){return super.postMessage(t,n,Object.assign(Object.assign({},i),{protocol:"arweave",version:"1.0.0"}))}getPublicKey(){return at(this,void 0,void 0,function*(){let t=yield this.postMessage("getPublicKey");if(!(0,Ut.is)(t,n=>{function i(o){return typeof o!="string"?{}:null}return i(n)}))throw"TypeError";return t})}getArweaveConfig(){return at(this,void 0,void 0,function*(){let t=yield this.postMessage("getArweaveConfig");if(!(0,Ut.is)(t,n=>{function i(P){return P!==void 0?{}:null}function o(P){return typeof P!="string"?{}:null}function f(P){return P!==null?{}:null}function c(P){var C=[i,o];for(let q of C){var Z=q(P);if(!Z)return null}return{}}function d(P){return typeof P!="number"?{}:null}function I(P){var C=[i,o,d];for(let q of C){var Z=q(P);if(!Z)return null}return{}}function E(P){var C=[i,d];for(let q of C){var Z=q(P);if(!Z)return null}return{}}function k(P){return P!==!1?{}:null}function O(P){return P!==!0?{}:null}function L(P){var C=[i,k,O];for(let q of C){var Z=q(P);if(!Z)return null}return{}}function V(P){if(typeof P!="object"||P===null||Array.isArray(P))return{};if("protocol"in P){var C=c(P.protocol);if(C)return C}if("host"in P){var C=c(P.host);if(C)return C}if("port"in P){var C=I(P.port);if(C)return C}if("timeout"in P){var C=E(P.timeout);if(C)return C}if("logging"in P){var C=L(P.logging);if(C)return C}return null}function J(){return null}function oe(P){if(typeof P!="object"||P===null||Array.isArray(P))return{};if("logger"in P){var C=J(P.logger);if(C)return C}return null}function G(P){var C=[V,oe];for(let q of C){var Z=q(P);if(Z)return Z}return null}return G(n)}))throw"TypeError";return delete t.logger,t})}signTransaction(t,n){var i;return at(this,void 0,void 0,function*(){let{data:o,chunks:f}=t,c=Vl(t,["data","chunks"]),d=yield this.postMessage("signTransaction",[c,n]);if(!(0,Ut.is)(d,I=>{function E(P){return typeof P!="string"?{}:null}function k(P){return P!==void 0?{}:null}function O(P){return P!==null?{}:null}function L(P){var C=[k,O,E];for(let q of C){var Z=q(P);if(!Z)return null}return{}}function V(P){if(typeof P!="object"||P===null||Array.isArray(P))return{};if("name"in P){var C=E(P.name);if(C)return C}else return{};if("value"in P){var C=E(P.value);if(C)return C}else return{};return null}function J(P){if(!Array.isArray(P))return{};for(let Z=0;Z<P.length;Z++){var C=V(P[Z]);if(C)return C}return null}function oe(P){var C=[k,O,J];for(let q of C){var Z=q(P);if(!Z)return null}return{}}function G(P){if(typeof P!="object"||P===null||Array.isArray(P))return{};if("id"in P){var C=E(P.id);if(C)return C}else return{};if("owner"in P){var C=L(P.owner);if(C)return C}if("tags"in P){var C=oe(P.tags);if(C)return C}if("signature"in P){var C=E(P.signature);if(C)return C}else return{};if("reward"in P){var C=L(P.reward);if(C)return C}return null}return G(I)}))throw"TypeError";return t.setSignature({id:d.id,owner:d.owner||t.owner,tags:(i=d.tags)===null||i===void 0?void 0:i.map(I=>new aa.Tag(I.name,I.value,!0)),signature:d.signature,reward:d.reward||void 0}),t})}dispatch(t,n){return at(this,void 0,void 0,function*(){let i=yield this.postMessage("dispatch",[t,n],{transfer:!0});if(!(0,Ut.is)(i,o=>{function f(O){return typeof O!="string"?{}:null}function c(O){return O!=="BASE"?{}:null}function d(O){return O!=="BUNDLED"?{}:null}function I(O){return O!==null?{}:null}function E(O){var L=[c,d];for(let J of L){var V=J(O);if(!V)return null}return{}}function k(O){if(typeof O!="object"||O===null||Array.isArray(O))return{};if("id"in O){var L=f(O.id);if(L)return L}if("type"in O){var L=E(O.type);if(L)return L}return null}return k(o)}))throw"TypeError";return i})}sign(t,n){return at(this,void 0,void 0,function*(){let i=yield this.postMessage("sign",[t,n]);if(!ArrayBuffer.isView(i))throw"TypeError";let o=t.constructor;return new o(i.buffer)})}decrypt(t,n){return at(this,void 0,void 0,function*(){let i=yield this.postMessage("decrypt",[t,n]);if(!ArrayBuffer.isView(i))throw"TypeError";let o=t.constructor;return new o(i.buffer)})}}}var aa,Ut,at,Vl,fa=Ie(()=>{aa=Mt(Ot(),1),Ut=Mt(Sr(),1),at=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(f){f(o)})}return new(t||(t=Promise))(function(o,f){function c(E){try{I(n.next(E))}catch(k){f(k)}}function d(E){try{I(n.throw(E))}catch(k){f(k)}}function I(E){E.done?o(E.value):i(E.value).then(c,d)}I((n=n.apply(r,e||[])).next())})},Vl=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}});function la(r){return{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(i){i(t)}),(n=r.get("*"))&&n.slice().map(function(i){i(e,t)})}}}var ca=Ie(()=>{});var ut,Hn=Ie(()=>{ca();ut=class{constructor(){this.mittInstance=la()}emit(e,t){this.mittInstance.emit(e,t)}on(e,t){this.mittInstance.on(e,t)}off(e,t){this.mittInstance.off(e,t)}once(e,t){return new Promise(n=>{let i=o=>{this.off(e,i),n(o),t&&t(o)};this.on(e,i)})}}});var Wn,pa=Ie(()=>{Wn=class{constructor(){this._promiseController=[]}newMessagePromise(e,t){e.id=this._promiseController.length;let n=new Promise((i,o)=>this._promiseController.push({resolve:i,reject:o}));return t!=null&&t.timeout&&setTimeout(()=>this._promiseController[e.id].reject("timeout"),t.timeout),n}processResponse(e){let{id:t,result:n,error:i}=e;if(t!=null){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&isNaN(parseInt(t)))throw"error";if(!this._promiseController[+t])throw"received result to nonexistent request";return i!=null?this._promiseController[+t].reject(i):this._promiseController[+t].resolve(n),!0}}}});var ya,ha,da,br,ga=Ie(()=>{Hn();pa();ya=Mt(Sr(),1),ha="400",da="600",br=class extends ut{constructor(e,t){super();this._iframe={},this._showIframe=!1,this._popup={},this._usePopup=!0,this._requirePopup=!1,this._keepPopup=!1,this._promiseController=new Wn,this._pending=[],this.listener=i=>{var o,f,c,d,I,E;if(i.source!==this._popup.window&&i.source!==((o=this._iframe)===null||o===void 0?void 0:o.window)||i.origin!==((f=this._url)===null||f===void 0?void 0:f.origin)||typeof i.data!="object")return;let{method:k,params:O,id:L,result:V,error:J,session:oe}=i.data;if(console.info(`WalletConnector:${i.source===this._popup.window?"popup":"iframe"}`,i.data),L!=null&&(this._pending=this._pending.filter(P=>P!=L)),this._promiseController.processResponse(i.data)||typeof k!="string")return;if(k==="ready"){i.source===this._popup.window&&((d=(c=this._popup).resolve)===null||d===void 0||d.call(c)),i.source===this._iframe.window&&((E=(I=this._iframe).resolve)===null||E===void 0||E.call(I));return}if(k==="change")return;if(k==="showIframe"){if(typeof O!="boolean")return;this.showIframe=O}if(k==="usePopup"){if(typeof O!="boolean")return;this.setUsePopup(O)}if(k==="keepPopup"){if(typeof O!="boolean")return;this.setRequirePopup(O)}let G={method:k,params:O,session:oe};if(!(0,ya.is)(G,P=>{function C(x){return typeof x!="string"?{}:null}function Z(){return null}function q(x){return x!==void 0?{}:null}function F(x){return typeof x!="number"?{}:null}function ne(x){var ee=[q,C,F];for(let te of ee){var re=te(x);if(!re)return null}return{}}function se(x){if(typeof x!="object"||x===null||Array.isArray(x))return{};if("method"in x){var ee=C(x.method);if(ee)return ee}else return{};if("params"in x){var ee=Z(x.params);if(ee)return ee}else return{};if("session"in x){var ee=ne(x.session);if(ee)return ee}return null}return se(P)}))return console.warn("dropped");this.emit("message",G)},this._iframeParentNode=t==null?void 0:t.iframeParentNode,this._url=e;let n={origin:window.location.origin,session:Math.random().toString().slice(2)};t!=null&&t.name&&(n.name=t.name),t!=null&&t.logo&&(n.logo=t.logo),this._url.hash=new URLSearchParams(n).toString(),window.addEventListener("message",this.listener)}get url(){var e;return(e=this._url)===null||e===void 0?void 0:e.origin}get showIframe(){return this._showIframe}set showIframe(e){e!==this._showIframe&&(this._showIframe=e,this.deliverMessage({method:"showIframe",params:e}),this.emit("builtin",{showIframe:e}),this._iframeNode&&(this._iframeParentNode||(this._iframeNode.style.opacity=e?"1":"0",e?this._iframeNode.style.removeProperty("pointer-events"):this._iframeNode.style.pointerEvents="none",e?this._iframeNode.style.removeProperty("touch-action"):this._iframeNode.style.touchAction="none",e?this._iframeNode.style.zIndex="1000000":this._iframeNode.style.zIndex="-1000000",e?this._iframeNode.style.transition="opacity 0.2s ease":this._iframeNode.style.transition="opacity 0.2s ease, z-index 0s linear 0.2s")))}get usePopup(){return this._usePopup}setUsePopup(e){e!==this._usePopup&&(this._usePopup=e,this.emit("builtin",{usePopup:e}))}get requirePopup(){return this._requirePopup}setRequirePopup(e){e!==this._requirePopup&&(this._requirePopup=e,this.emit("builtin",{requirePopup:e}))}get keepPopup(){return this._keepPopup}set keepPopup(e){this._keepPopup=e,this.emit("builtin",{keepPopup:e}),e||this.closePopup(),e&&this.openPopup(!0)}destructor(e){this.closeIframe(),this.closePopup(!0),window.removeEventListener("message",this.listener)}postMessage(e,t){let n=this._promiseController.newMessagePromise(e,t).finally(()=>this.completeRequest());return this.deliverMessage(e),n}openIframe(){if(this._iframeEl)return;this._iframeNode=document.createElement("div"),this._iframeEl=document.createElement("iframe"),this._iframeEl.src=this._url.toString(),this._iframeEl.allow="usb",this._iframeEl.width=ha,this._iframeEl.height=da,this._iframeEl.style.border="none",this._iframeParentNode||(this._iframeEl.style.borderRadius="8px",this._iframeEl.style.maxWidth="100%",this._iframeEl.style.maxHeight="100%",this._iframeNode.style.position="fixed",this._iframeNode.style.inset="0",this._iframeNode.style.display="flex",this._iframeNode.style.alignItems="center",this._iframeNode.style.justifyContent="center",this._iframeNode.style.background="#00000088",this._iframeNode.style.opacity="0",this._iframeNode.style.pointerEvents="none",this._iframeNode.style.touchAction="none",this._iframeNode.style.zIndex="-1000000",this._iframeNode.style.transition="opacity 0.2s ease, z-index 0s linear 0.2s"),this._iframeNode.appendChild(this._iframeEl);let e=new Promise((n,i)=>this._iframe={resolve:n,reject:i});this._iframe.promise=e;let t=()=>{var n;this._iframeParentNode?this._iframeParentNode.appendChild(this._iframeNode):document.body.appendChild(this._iframeNode),this._iframe.window=(n=this._iframeEl)===null||n===void 0?void 0:n.contentWindow};document.readyState==="complete"||document.readyState==="interactive"?t():document.addEventListener("DOMContentLoaded",t)}closeIframe(){var e,t,n,i;(e=this._iframeEl)===null||e===void 0||e.setAttribute("src","about:blank"),(t=this._iframeNode)===null||t===void 0||t.remove(),this._iframeNode=void 0,this._iframeEl=void 0,(i=(n=this._iframe).reject)===null||i===void 0||i.call(n),this._iframe={}}openPopup(e){if(this._popup.window&&!this._popup.window.closed){this._popup.window.focus();return}if(!this.usePopup&&!e)return;window.name="parent";let t=window.open(this._url.toString(),"_blank",`location,resizable,scrollbars,width=${ha},height=${da}`),n=new Promise((o,f)=>this._popup={window:t,resolve:o,reject:f});this._popup.promise=n;let i=setInterval(()=>{this._popup.window&&!this._popup.window.closed||(this.keepPopup&&(this.keepPopup=!1),clearInterval(i))},200)}closePopup(e){var t,n,i;!this._popup.window||((t=this._popup.window)===null||t===void 0?void 0:t.closed)||(this.keepPopup||this.requirePopup)&&!e||(this._popup.window.location.href="about:blank",this._popup.window.close(),(i=(n=this._popup).reject)===null||i===void 0||i.call(n),this._popup={})}completeRequest(){setTimeout(()=>{this._pending.length||(this.closePopup(),this.showIframe=!1)},100)}deliverMessage(e,t){var n,i;if(!this._url)throw"Missing URL";console.info("WalletConnector:post",e);let o=Object.assign(Object.assign({},e),{jsonrpc:"2.0"});o.id!=null&&this._pending.push(o.id),this.openIframe(),this._iframe.promise=(n=this._iframe.promise)===null||n===void 0?void 0:n.then(()=>{var f;return(f=this._iframe.window)===null||f===void 0?void 0:f.postMessage(o,this._url.origin,t!=null&&t.transfer?[o]:void 0)}).catch(()=>{}),this.openPopup(),this._popup.promise=(i=this._popup.promise)===null||i===void 0?void 0:i.then(()=>{var f;return(f=this._popup.window)===null||f===void 0?void 0:f.postMessage(o,this._url.origin,t!=null&&t.transfer?[o]:void 0)}).catch(()=>{})}}});function ma(r){return typeof r=="object"?r:(r.includes("://")||(r="https://"+r),new URL(r))}var wa=Ie(()=>{});function _a(r){!r.namespaces||(Je.find(e=>e===r)||Je.push(r),Or())}function Aa(r){if(!Je.find(e=>e===r))return Or();Je.splice(Je.indexOf(r),1);for(let e in r.namespaces)Rt[e]===r&&(window[e]=Gn[e],delete Gn[e],delete Rt[e]);Or()}function Or(){for(let r of Je)for(let e in r.namespaces)Rt[e]&&Rt[e]!==r||window[e]!==r.namespaces[e]&&(Gn[e]=window[e],window[e]=r.namespaces[e],Rt[e]=r);window.clearInterval(va),Je.length&&(va=setInterval(()=>Or(),1e4))}var va,Je,Rt,Gn,Ea=Ie(()=>{Je=[],Rt={},Gn={}});var Sa,ba=Ie(()=>{Sa="Window context missing. If you are using a server side rendering framework, make sure that the connector is excluded. If you want to use the connector outside the browser, use the node version of the module instead"});var Oa,jn,me,Ta=Ie(()=>{ga();Hn();wa();Ea();ba();Oa=Mt(Sr(),1),jn=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(f){f(o)})}return new(t||(t=Promise))(function(o,f){function c(E){try{I(n.next(E))}catch(k){f(k)}}function d(E){try{I(n.throw(E))}catch(k){f(k)}}function I(E){E.done?o(E.value):i(E.value).then(c,d)}I((n=n.apply(r,e||[])).next())})},me=class extends ut{constructor(e,t){super();this._session=0,this._listener=n=>{let{method:i,params:o,session:f}=n;if(!(f!=null&&this._session!=f)&&!(!f&&this._session)){if(i==="connect"){if(!(0,Oa.is)(o,c=>{function d(I){return typeof I!="string"?{}:null}return d(c)}))return;this.setAddress(o)}i==="disconnect"&&this.disconnectEvent(!1)}},this._appInfo=e,this._emitterPassthrough=n=>{let i=Object.entries(n)[0];this.emit(i[0],i[1])},this.on("connect",()=>_a(this)),this.on("disconnect",()=>Aa(this)),t&&this.setUrl(t)}get address(){return this._address}setAddress(e){e&&e===this.address||(this._address=e,e!=null?this.emit("connect",e):this.emit("disconnect",e),this.emit("change",e))}get connected(){return this._address!=null}get url(){var e;return(e=this._bridge)===null||e===void 0?void 0:e.url}get showIframe(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.showIframe)||!1}get usePopup(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.usePopup)||!1}get requirePopup(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.requirePopup)||!1}get keepPopup(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.keepPopup)||!1}set keepPopup(e){this._bridge&&(this._bridge.keepPopup=e)}setUrl(e){var t;if(!window){console.error(Sa);return}let n=this._bridge,i=ma(e);if(this._url=i,((t=this._bridge)===null||t===void 0?void 0:t.url)!==i.origin){if(this.disconnect(),!me._bridges[i.origin])this._bridge=new br(i,this._appInfo),me._bridges[i.origin]={bridge:this._bridge,sessions:[]};else{this._bridge=me._bridges[i.origin].bridge;let o=me._bridges[i.origin].sessions;for(let f=0;f<=o.length;f++)if(o.indexOf(f)<0){this._session=f;break}}me._bridges[i.origin].sessions.push(this._session),this._bridge.on("message",this._listener),this._bridge.on("builtin",this._emitterPassthrough),this._bridge.showIframe!==(n==null?void 0:n.showIframe)&&this.emit("showIframe",this._bridge.showIframe),this._bridge.usePopup!==(n==null?void 0:n.usePopup)&&this.emit("usePopup",this._bridge.usePopup),this._bridge.requirePopup!==(n==null?void 0:n.requirePopup)&&this.emit("requirePopup",this._bridge.requirePopup),this._bridge.keepPopup!==(n==null?void 0:n.keepPopup)&&this.emit("keepPopup",this._bridge.keepPopup)}}connect(e){return jn(this,void 0,void 0,function*(){this._bridge||this._url&&this.setUrl(this._url);let t=new Promise((n,i)=>{this.once("change",o=>o?n(o):i())}).finally(()=>{var n;return(n=this._bridge)===null||n===void 0?void 0:n.completeRequest()});return this._bridge.deliverMessage({method:"connect",params:e}),t})}disconnect(e){return jn(this,void 0,void 0,function*(){return this.disconnectEvent(!0,e)})}disconnectEvent(e,t){return jn(this,void 0,void 0,function*(){if(!this._bridge)return;let n=this._bridge,i=this._session,o=n.url;if(this.setAddress(void 0),this._bridge=void 0,this._session=0,e)try{yield n.postMessage({method:"disconnect",params:[t],session:i})}catch(f){console.warn("disconnect request failed")}n.off("message",this._listener),n.off("builtin",this._emitterPassthrough),me._bridges[o].sessions=me._bridges[o].sessions.filter(f=>f!=i),setTimeout(()=>{me._bridges[o].sessions.length||(me._bridges[o].bridge.destructor(),delete me._bridges[o])},100)})}postMessage(e,t,n){return new Promise((i,o)=>{if(!this._bridge)return o("URL missing");this.once("disconnect",o),this._bridge.postMessage({method:e,params:t,session:this._session,protocol:n==null?void 0:n.protocol,version:n==null?void 0:n.version},n).then(i).catch(o)})}};me._bridges={}});var Pa={};qa(Pa,{ArweaveWebWallet:()=>Jl});var Jl,xa=Ie(()=>{fa();Ta();Jl=ua(me)});var Xl="http://localhost:8080",Kl=['link[rel*="icon"][href]','link[rel="apple-touch-icon"][href]','link[rel="apple-touch-icon-precomposed"][href]','link[rel="apple-touch-startup-image"][href]','link[rel="mask-icon"][href]','link[rel="fluid-icon"][href]','meta[name="msapplication-TileImage"][content]','meta[itemprop="image"][content]'].join(", "),Ct,zn,Na=r=>{let e=r.href||r.content,t=e.split(".");return e.startsWith("data:image/svg")||t[t.length-1]==="svg"},Zl=()=>{var f,c;let r=window.location.host.split("."),e=r[r.length-2]||r[0],t=e.charAt(0).toUpperCase()+e.slice(1),n=document.querySelectorAll(Kl),i=Array.from(n).reverse().sort((d,I)=>{var E,k;return+((E=I.rel)==null?void 0:E.includes("apple"))-+((k=d.rel)==null?void 0:k.includes("apple"))}).sort((d,I)=>{var E,k,O,L,V,J;return+((O=(k=(E=I.sizes)==null?void 0:E.value)==null?void 0:k.split("x"))==null?void 0:O[0])-+((J=(V=(L=d.sizes)==null?void 0:L.value)==null?void 0:V.split("x"))==null?void 0:J[0])}).sort((d,I)=>+Na(I)-+Na(d)),o=((f=i[0])==null?void 0:f.href)||((c=i[0])==null?void 0:c.content);return o&&!o.includes("://")&&!o.startsWith("data:image")&&(o=location.origin+(o[0]!=="/"?"/":"")+o),{name:t,logo:o}},Yl=async()=>{let{ArweaveWebWallet:r}=await Promise.resolve().then(()=>(xa(),Pa));Ct||(Ct=new r(Zl()),Ct.on("change",e=>{if(!zn)return zn=e;zn=e,dispatchEvent(new CustomEvent("walletSwitch",{detail:{address:e}}))})),Ct.setUrl(Xl),await Ct.connect(),dispatchEvent(new CustomEvent("arweaveWalletLoaded",{detail:{}}))};window.addEventListener("arweave-app-extension:connect",Yl);})();
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
//# sourceMappingURL=wrapper.js.map
